import{j as e,F as re,g as S,b as ne,c as ie,d as le,e as oe,f as ce,a as P}from"./admin-CjE1p_fZ.js";import{r as n,L as A,b as de,c as me,u as xe}from"./router-DqluUKdp.js";import{G as b}from"./icons-CDVIwAiG.js";import{g as he}from"./vendor-Tt9FPAzf.js";import{r as ue}from"./slick-JyPX3RhO.js";import{l as ge,u as fe,a as pe,P as je,E as be}from"./stripe-DnwkPVAo.js";import{u as J}from"./auth-Tf0T-Vub.js";const $=({src:t,alt:o,className:d="",width:m,height:a,priority:u=!1,placeholder:p="blur",quality:i=75,...r})=>{const[s,l]=n.useState(!1),[f,w]=n.useState(u),[h,x]=n.useState(!1),c=n.useRef(null);n.useEffect(()=>{if(u)return;const N=new IntersectionObserver(([z])=>{z.isIntersecting&&(w(!0),N.disconnect())},{threshold:.1,rootMargin:"50px"});return c.current&&N.observe(c.current),()=>N.disconnect()},[u]);const g=()=>{l(!0)},C=()=>{x(!0)},I=(N=>N?(N.includes(".webp"),N):"")(t);return h?e.jsx("div",{ref:c,className:`bg-gray-200 flex items-center justify-center ${d}`,style:{width:m,height:a},...r,children:e.jsx("span",{className:"text-[#171717] text-sm",children:"Image not available"})}):e.jsxs("div",{ref:c,className:`relative ${d}`,...r,children:[!s&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",style:{width:m,height:a},children:e.jsx("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"})}),f&&e.jsx("img",{src:I,alt:o,width:m,height:a,className:`transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onLoad:g,onError:C,loading:u?"eager":"lazy",decoding:"async"})]})},X=n.createContext(),H=()=>n.useContext(X),Qe=({children:t})=>{const[o,d]=n.useState(()=>{const r=localStorage.getItem("cartItems");return r?JSON.parse(r):[]});n.useEffect(()=>{localStorage.setItem("cartItems",JSON.stringify(o))},[o]);const m=r=>{d(s=>s.find(f=>f._id===r._id)?s.map(f=>f._id===r._id?{...f,quantity:(f.quantity||1)+1}:f):[...s,{...r,quantity:1}])},a=r=>{d(s=>s.filter(l=>l._id!==r))},u=()=>d([]),p=r=>{d(s=>s.map(l=>l._id===r?{...l,quantity:(l.quantity||1)+1}:l))},i=r=>{d(s=>s.map(l=>l._id===r?{...l,quantity:(l.quantity||1)-1}:l).filter(l=>l.quantity>0))};return e.jsx(X.Provider,{value:{items:o,addToCart:m,removeFromCart:a,clearCart:u,increaseQuantity:p,decreaseQuantity:i},children:t})};function ve(t){return b({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"},child:[]}]})(t)}function ye(t){return b({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"},child:[]}]})(t)}function we(t){return b({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"},child:[]}]})(t)}function Ne(t){return b({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 0 0-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 1 0 0 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 0 0-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 0 0-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6z"},child:[]}]})(t)}const Y=n.createContext(),T=()=>n.useContext(Y),Je=({children:t})=>{const{user:o}=J(),[d,m]=n.useState(()=>{try{const i=localStorage.getItem("wishlistItems"),r=i?JSON.parse(i):[];return console.log("Initial wishlist loaded from localStorage:",r),r}catch(i){return console.error("Error loading wishlist from localStorage:",i),[]}});n.useEffect(()=>{try{localStorage.setItem("wishlistItems",JSON.stringify(d)),console.log("Wishlist saved to localStorage:",d)}catch(i){console.error("Error saving wishlist to localStorage:",i)}},[d]);const a=i=>{console.log("Toggle wishlist called for product:",i),m(r=>{const s=r.includes(i)?r.filter(l=>l!==i):[...r,i];return console.log("New wishlist:",s),s})},u=()=>m([]),p=()=>{try{const i=localStorage.getItem("wishlistItems"),r=i?JSON.parse(i):[];console.log("Refreshing wishlist from localStorage:",r),m(r)}catch(i){console.error("Error refreshing wishlist:",i)}};return e.jsx(Y.Provider,{value:{wishlist:d,toggleWishlist:a,clearWishlist:u,refreshWishlist:p},children:t})};function D({value:t,onChange:o,disabled:d}){return e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(m=>e.jsx("button",{type:"button",disabled:d,onClick:()=>o(m),className:m<=t?"text-yellow-400":"text-gray-300",children:"â˜…"},m))})}function Xe(t){return b({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Home"},child:[{tag:"path",attr:{d:"M19.37,10.22l-6.2-7.6a1.5,1.5,0,0,0-2.33-.01L4.63,10.22a2.5,2.5,0,0,0-.57,1.59v7.63a2.507,2.507,0,0,0,2.5,2.5H17.44a2.507,2.507,0,0,0,2.5-2.5V11.81A2.5,2.5,0,0,0,19.37,10.22ZM10,20.94v-5.5a1.5,1.5,0,0,1,1.5-1.5h1a1.5,1.5,0,0,1,1.5,1.5v5.5Zm8.94-1.5a1.511,1.511,0,0,1-1.5,1.5H15v-5.5a2.5,2.5,0,0,0-2.5-2.5h-1A2.5,2.5,0,0,0,9,15.44v5.5H6.56a1.511,1.511,0,0,1-1.5-1.5V11.81a1.474,1.474,0,0,1,.34-.95l6.22-7.61A.474.474,0,0,1,12,3.06a.479.479,0,0,1,.39.19l6.21,7.61a1.474,1.474,0,0,1,.34.95Z"},child:[]}]}]})(t)}function Ye(t){return b({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Login"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M20.944,18.432a2.577,2.577,0,0,1-2.729,2.5c-2.153.012-4.307,0-6.46,0a.5.5,0,0,1,0-1c2.2,0,4.4.032,6.6,0,1.107-.016,1.589-.848,1.589-1.838V5.63a1.545,1.545,0,0,0-.969-1.471,3.027,3.027,0,0,0-1.061-.095H11.755a.5.5,0,0,1,0-1c2.225,0,4.465-.085,6.688,0a2.566,2.566,0,0,1,2.5,2.67Z"},child:[]},{tag:"path",attr:{d:"M15.794,12.354a.459.459,0,0,0,.138-.312A.3.3,0,0,0,15.938,12a.29.29,0,0,0-.006-.041.455.455,0,0,0-.138-.313L12.125,7.978a.5.5,0,0,0-.707.707L14.234,11.5H3.492a.5.5,0,0,0,0,1H14.234l-2.816,2.815a.5.5,0,0,0,.707.707Z"},child:[]}]}]}]})(t)}function Ge(t){return b({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Logout"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M20.968,18.448a2.577,2.577,0,0,1-2.73,2.5c-2.153.012-4.306,0-6.459,0a.5.5,0,0,1,0-1c2.2,0,4.4.032,6.6,0,1.107-.016,1.589-.848,1.589-1.838V5.647A1.546,1.546,0,0,0,19,4.175a3.023,3.023,0,0,0-1.061-.095H11.779a.5.5,0,0,1,0-1c2.224,0,4.465-.085,6.687,0a2.567,2.567,0,0,1,2.5,2.67Z"},child:[]},{tag:"path",attr:{d:"M3.176,11.663a.455.455,0,0,0-.138.311c0,.015,0,.028-.006.043s0,.027.006.041a.457.457,0,0,0,.138.312l3.669,3.669a.5.5,0,0,0,.707-.707L4.737,12.516H15.479a.5.5,0,0,0,0-1H4.737L7.552,8.7a.5.5,0,0,0-.707-.707Z"},child:[]}]}]}]})(t)}function Ke(t){return b({attr:{version:"1.1",id:"search",x:"0px",y:"0px",viewBox:"0 0 24 24",style:"enable-background:new 0 0 24 24;"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:`M20.031,20.79c0.46,0.46,1.17-0.25,0.71-0.7l-3.75-3.76c1.27-1.41,2.04-3.27,2.04-5.31
		c0-4.39-3.57-7.96-7.96-7.96s-7.96,3.57-7.96,7.96c0,4.39,3.57,7.96,7.96,7.96c1.98,0,3.81-0.73,5.21-1.94L20.031,20.79z
		 M4.11,11.02c0-3.84,3.13-6.96,6.96-6.96c3.84,0,6.96,3.12,6.96,6.96c0,3.84-3.12,6.96-6.96,6.96C7.24,17.98,4.11,14.86,4.11,11.02
		z`},child:[]}]}]})(t)}function Ce(t){return b({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Shopping_Basket"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M19.44,7.937H17.3l-1.21-4.51a.508.508,0,0,0-.61-.35.489.489,0,0,0-.35.61l1.14,4.25H7.74l1.14-4.25a.5.5,0,0,0-.36-.61.513.513,0,0,0-.61.35l-1.2,4.51H4.56a1.5,1.5,0,0,0-.32,2.96l.74,7.77a2.492,2.492,0,0,0,2.49,2.27h9.06a2.492,2.492,0,0,0,2.49-2.27l.74-7.77a1.5,1.5,0,0,0-.32-2.96Zm-1.41,10.64a1.5,1.5,0,0,1-1.5,1.36H7.47a1.5,1.5,0,0,1-1.5-1.36l-.72-7.64h13.5Zm1.41-8.64H4.56a.508.508,0,0,1-.5-.5.5.5,0,0,1,.5-.5H19.44a.5.5,0,0,1,.5.5A.508.508,0,0,1,19.44,9.937Z"},child:[]},{tag:"path",attr:{d:"M9.5,17.432a.5.5,0,0,1-.5-.5v-3a.5.5,0,0,1,1,0v3A.5.5,0,0,1,9.5,17.432Z"},child:[]},{tag:"path",attr:{d:"M14.5,17.432a.5.5,0,0,1-.5-.5v-3a.5.5,0,0,1,1,0v3A.5.5,0,0,1,14.5,17.432Z"},child:[]}]}]}]})(t)}function et(t){return b({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Shopping_Cart"},child:[{tag:"path",attr:{d:"M17.437,19.934c0,0.552 -0.448,1 -1,1c-0.552,0 -1,-0.448 -1,-1c0,-0.552 0.448,-1 1,-1c0.552,0 1,0.448 1,1Zm-11.217,-4.266l-0.945,-10.9c-0.03,-0.391 -0.356,-0.693 -0.749,-0.693l-0.966,-0c-0.276,-0 -0.5,-0.224 -0.5,-0.5c0,-0.276 0.224,-0.5 0.5,-0.5l0.966,-0c0.916,-0 1.676,0.704 1.746,1.617l0.139,1.818l13.03,-0c0.885,-0 1.577,0.76 1.494,1.638l-0.668,7.52c-0.121,1.285 -1.199,2.267 -2.489,2.267l-9.069,0c-1.29,0 -2.367,-0.981 -2.489,-2.267Zm0.274,-8.158l0.722,8.066c0.073,0.77 0.719,1.359 1.493,1.359l9.069,0c0.774,0 1.42,-0.589 1.493,-1.359l0.668,-7.518c0.028,-0.294 -0.203,-0.548 -0.498,-0.548l-12.947,-0Zm4.454,12.424c-0,0.552 -0.448,1 -1,1c-0.552,0 -1,-0.448 -1,-1c-0,-0.552 0.448,-1 1,-1c0.552,0 1,0.448 1,1Z"},child:[]}]}]})(t)}function tt(t){return b({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(t)}function st(t){return b({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,82a46,46,0,1,0,46,46A46.06,46.06,0,0,0,128,82Zm0,80a34,34,0,1,1,34-34A34,34,0,0,1,128,162ZM176,26H80A54.06,54.06,0,0,0,26,80v96a54.06,54.06,0,0,0,54,54h96a54.06,54.06,0,0,0,54-54V80A54.06,54.06,0,0,0,176,26Zm42,150a42,42,0,0,1-42,42H80a42,42,0,0,1-42-42V80A42,42,0,0,1,80,38h96a42,42,0,0,1,42,42ZM190,76a10,10,0,1,1-10-10A10,10,0,0,1,190,76Z"},child:[]}]})(t)}function Se(t){return b({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M214.75,211.71l-62.6-98.38,61.77-67.95a8,8,0,0,0-11.84-10.76L143.24,99.34,102.75,35.71A8,8,0,0,0,96,32H48a8,8,0,0,0-6.75,12.3l62.6,98.37-61.77,68a8,8,0,1,0,11.84,10.76l58.84-64.72,40.49,63.63A8,8,0,0,0,160,224h48a8,8,0,0,0,6.75-12.29ZM164.39,208,62.57,48h29L193.43,208Z"},child:[]}]})(t)}function at(t){return b({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M220.18,59.79a54.05,54.05,0,0,0-76.31,0L128,74.51,112.13,59.74A54,54,0,0,0,35.8,136.15l89.35,90.66a4,4,0,0,0,5.7,0l89.33-90.64a54,54,0,0,0,0-76.38Zm-5.67,70.74L128,218.3,41.47,130.51a46,46,0,0,1,65.06-65.06l.1.1,18.64,17.36a4,4,0,0,0,5.46,0l18.64-17.36.1-.1a46,46,0,1,1,65,65.08Z"},child:[]}]})(t)}function rt(t){return b({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,44H40A12,12,0,0,0,28,56V200a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A12,12,0,0,0,216,44Zm4,156a4,4,0,0,1-4,4H40a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H216a4,4,0,0,1,4,4ZM172,88a44,44,0,0,1-88,0,4,4,0,0,1,8,0,36,36,0,0,0,72,0,4,4,0,0,1,8,0Z"},child:[]}]})(t)}var ke=ue();const G=he(ke),U=({show:t,children:o})=>e.jsx("div",{className:`pointer-events-none absolute left-10 top-2 z-20 px-2 py-1 rounded text-xs text-gray-800 bg-gray-100 dark:text-gray-800 dark:bg-gray-200 transition-opacity duration-200 ${t?"opacity-100":"opacity-0"}`,style:{whiteSpace:"nowrap"},children:o}),Le=[{name:"Facebook",icon:e.jsx(ne,{size:20}),url:(t,o)=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}&quote=${encodeURIComponent(o)}`},{name:"X",icon:e.jsx(Se,{size:20}),url:(t,o)=>`https://twitter.com/intent/tweet?url=${encodeURIComponent(t)}&text=${encodeURIComponent(o)}`},{name:"Pinterest",icon:e.jsx(ie,{size:20}),url:(t,o)=>`https://pinterest.com/pin/create/button/?url=${encodeURIComponent(t)}&description=${encodeURIComponent(o)}`},{name:"LinkedIn",icon:e.jsx(le,{size:20}),url:(t,o)=>`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(t)}`},{name:"Telegram",icon:e.jsx(oe,{size:20}),url:(t,o)=>`https://t.me/share/url?url=${encodeURIComponent(t)}&text=${encodeURIComponent(o)}`},{name:"WhatsApp",icon:e.jsx(ce,{size:20}),url:(t,o)=>`https://wa.me/?text=${encodeURIComponent(o+" "+t)}`}],Ie=({product:t,open:o,onClose:d})=>{const{addToCart:m}=H(),[a,u]=n.useState("M"),[p,i]=n.useState(null),r=window.location.origin+"/products/"+t._id,s=["S","M","L","XL"],l={dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,fade:!0,cssEase:"linear",arrows:!0,adaptiveHeight:!0,nextArrow:e.jsx(f,{}),prevArrow:e.jsx(w,{})};function f(h){const{className:x,style:c,onClick:g}=h;return e.jsx("div",{className:x,style:{...c,right:"-25px",zIndex:1},onClick:g})}function w(h){const{className:x,style:c,onClick:g}=h;return e.jsx("div",{className:x,style:{...c,left:"-25px",zIndex:1},onClick:g})}return!o||!t?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-3xl w-full relative p-8 flex flex-col md:flex-row gap-10 min-h-[480px] max-h-[90vh] md:max-h-[90vh] overflow-y-auto md:overflow-visible",style:{padding:window.innerWidth<=768?16:void 0,minHeight:window.innerWidth<=768?0:void 0,maxHeight:window.innerWidth<=768?"80vh":void 0},children:[e.jsx("button",{className:"absolute top-2 right-2 text-black hover:text-gray-700 rounded-full w-8 h-8 flex items-center justify-center text-3xl font-thin tracking-tighter z-50",onClick:d,"aria-label":"Close",children:"Ã—"}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:t.images&&t.images.length>0?e.jsx("div",{className:"w-full max-w-md",children:e.jsx(G,{...l,children:t.images.map((h,x)=>e.jsx("div",{className:"px-2 outline-none",children:e.jsx($,{src:S(h),alt:`${t.name} - ${x+1}`,className:"w-full h-auto max-h-96 object-contain rounded mx-auto",priority:x===0})},x))})}):e.jsx($,{src:S(t.image),alt:t.name,className:"w-full max-w-md object-contain rounded max-h-96",priority:!0})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-start",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:t.name}),e.jsx("div",{className:"text-pink-600 dark:text-pink-400 text-2xl font-semibold mb-4",children:t.isDiscounted&&t.originalPrice?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"line-through text-red-500 text-xl",children:["â‚¬",t.originalPrice.toLocaleString()]}),e.jsxs("span",{className:"text-pink-600 dark:text-pink-400",children:["â‚¬",t.price.toLocaleString()]}),e.jsx("span",{className:"bg-red-500 text-white px-3 py-1 rounded text-sm font-medium",children:t.discountLabel||"Last Chance"})]}):e.jsxs("span",{children:["â‚¬",t.price.toLocaleString()]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Size:"}),e.jsx("div",{className:"flex gap-6",children:s.map(h=>e.jsxs("button",{className:"relative px-2 py-1 text-lg font-medium text-gray-800 focus:outline-none bg-transparent",style:{minWidth:36},onMouseEnter:()=>i(h),onMouseLeave:()=>i(null),onClick:()=>u(h),children:[h,e.jsx("span",{className:`absolute left-0 right-0 -bottom-1 h-[2px] rounded transition-all duration-200 ${a===h?"bg-black w-full opacity-100":p===h?"bg-black w-2/3 opacity-60":"bg-transparent w-0 opacity-0"}`})]},h))})]}),e.jsxs("button",{className:"mt-2 mb-8 bg-pink-500 text-gray-800 px-6 py-2 rounded flex items-center gap-2 justify-center hover:bg-pink-600 transition text-lg font-semibold",onClick:()=>{m({...t,selectedSize:a}),d(),setTimeout(()=>alert("Added to cart!"),200)},children:[e.jsx(Ne,{size:22})," Add to Cart"]}),e.jsxs("div",{className:"mt-auto pt-4 border-t flex flex-col gap-2 pb-2 md:pb-0",children:[e.jsx("div",{className:"font-medium text-gray-700 mb-1",children:"Share:"}),e.jsx("div",{className:"flex gap-4 items-center flex-wrap",children:Le.map(h=>e.jsx("a",{href:h.url(r,t.name),target:"_blank",rel:"noopener noreferrer",className:"text-[#171717] hover:text-pink-600 dark:hover:text-pink-400 transition",title:"Share on "+h.name,children:h.icon},h.name))})]})]})]})})},Me=({product:t,linkPath:o=null})=>{const{addToCart:d}=H(),{wishlist:m,toggleWishlist:a}=T(),[u,p]=n.useState(!1),[i,r]=n.useState(!1),[s,l]=n.useState(!1),[f,w]=n.useState(!1),[h,x]=n.useState(!1),[c,g]=n.useState(!1),[C,v]=n.useState(!1),I=()=>window.matchMedia("(max-width: 768px)").matches,N=()=>o||(t.commissionRate!==void 0?`/commission/${t._id}`:`/products/${t._id}`),z=k=>{I()&&(C?v(!1):(k.preventDefault(),v(!0)))},_=t.images&&t.images.length>0?t.images[0]:t.image,Z=t.images&&t.images.length>1?t.images[1]:_,R=k=>{k.preventDefault(),console.log("Adding to cart:",t),console.log("Product images:",t.images),console.log("Product image:",t.image),d(t),g(!0),setTimeout(()=>g(!1),1500)};return e.jsxs("div",{className:"relative bg-white rounded-2xl overflow-hidden shadow group transition-all duration-300 border hover:shadow-xl",onMouseEnter:()=>p(!0),onMouseLeave:()=>{p(!1),r(!1),l(!1),x(!1),v(!1)},children:[c&&e.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-white/70 animate-fade-in-out",children:[e.jsx(re,{className:"text-green-500",size:48}),e.jsx("span",{className:"mt-2 text-green-700 font-bold text-lg animate-pop",children:"Added to cart!"})]}),e.jsx(A,{to:N(),className:"block",onClick:z,children:e.jsxs("div",{className:"relative w-full aspect-[4/5] overflow-hidden",children:[e.jsx($,{src:S(u?Z:_),alt:t.name,className:`w-full h-full object-contain transition-transform duration-500 ${u?"scale-105":"scale-100"}`,priority:!0}),e.jsxs("div",{className:`absolute top-2 left-2 flex flex-col gap-2 z-10
            transition-all duration-300
            ${u||I()&&C?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}
          `,children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"bg-white rounded-full w-9 h-9 flex items-center justify-center shadow hover:scale-110 transition",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:k=>{k.preventDefault(),w(!0)},tabIndex:-1,"aria-label":`Quick view ${t.name}`,children:e.jsx(we,{size:22,className:"text-gray-700"})}),e.jsx(U,{show:i,children:"Quick View"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"bg-white rounded-full w-9 h-9 flex items-center justify-center shadow hover:scale-110 transition",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:k=>{k.preventDefault(),a(t._id)},tabIndex:-1,"aria-label":`${m.includes(t._id)?"Remove from":"Add to"} wishlist ${t.name}`,children:m.includes(t._id)?e.jsx(ve,{size:22,className:"text-pink-600 dark:text-pink-400"}):e.jsx(ye,{size:22,className:"text-gray-700"})}),e.jsx(U,{show:s,children:"Add to Wishlist"})]})]}),e.jsx("div",{className:"absolute bottom-[-09px] left-1/2 transform -translate-x-1/2",children:e.jsx("button",{onClick:R,className:"text-[#171717] hover:text-pink-600 dark:hover:text-pink-400 transition-colors cursor-pointer",title:"Add to Cart","aria-label":`Add ${t.name} to cart`,children:e.jsx(Ce,{size:24})})})]})}),e.jsxs("div",{className:"flex flex-col items-center mt-1 mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between w-full px-2 mb-2",children:[t.partnerLogo&&e.jsx($,{src:S(t.partnerLogo),alt:t.partnerName||"Partner",className:"w-8 h-8 rounded-full object-cover border border-gray-200",title:t.partnerName||"Partner",width:32,height:32}),e.jsx("div",{className:"flex-1"})]}),e.jsx("div",{className:"text-base font-medium text-gray-900 text-center truncate w-full max-w-[90%]",children:t.name}),e.jsx("div",{className:"text-pink-400 text-lg font-bold mt-1",children:t.isDiscounted&&t.originalPrice?e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("span",{className:"line-through text-red-500 text-sm",children:["â‚¬",t.originalPrice.toLocaleString()]}),e.jsxs("span",{className:"text-pink-400",children:["â‚¬",t.price.toLocaleString()]}),e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded text-xs font-medium",children:t.discountLabel||"Last Chance"})]}):e.jsxs("span",{children:["â‚¬",t.price.toLocaleString()]})})]}),e.jsx(Ie,{product:t,open:f,onClose:()=>w(!1)})]})},Ae=({type:t="card",count:o=1})=>{const d=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden animate-pulse",children:[e.jsx("div",{className:"w-full h-48 bg-gray-200"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"})]})]}),m=()=>e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow group animate-pulse",children:[e.jsx("div",{className:"w-full aspect-[4/5] bg-gray-200"}),e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-1"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/3"})]})]}),a=()=>e.jsx("div",{className:"space-y-4",children:[...Array(o)].map((i,r)=>e.jsxs("div",{className:"flex items-center space-x-4 animate-pulse",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},r))}),u=()=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"space-y-3",children:[...Array(o)].map((i,r)=>e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded flex-1"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"})]},r))})}),p=()=>{switch(t){case"card":return e.jsx(d,{});case"product":return e.jsx(m,{});case"list":return e.jsx(a,{});case"table":return e.jsx(u,{});default:return e.jsx(d,{})}};return e.jsx("div",{className:t==="product"?"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-6":"",children:[...Array(o)].map((i,r)=>e.jsx("div",{children:p()},r))})};function nt(){const{addToCart:t}=H(),{wishlist:o,toggleWishlist:d}=T(),[m,a]=n.useState([]),[u,p]=n.useState([]),[i,r]=n.useState(!0),[s,l]=n.useState(""),[f,w]=n.useState({}),[h]=de(),x=h.get("search")||"";return n.useEffect(()=>{async function c(){r(!0),l("");try{const g=await P("/products");if(!g.ok)throw new Error("Fehler beim Laden der Produkte");const C=await g.json();a(C)}catch(g){l(g.message)}finally{r(!1)}}c()},[]),n.useEffect(()=>{if(x){const c=m.filter(g=>g.name.toLowerCase().includes(x.toLowerCase())||g.description?.toLowerCase().includes(x.toLowerCase()));p(c)}else p(m)},[m,x]),e.jsx("div",{className:"min-h-screen bg-white text-gray-900",children:e.jsxs("div",{className:"w-full max-w-6xl mx-auto px-2 sm:px-4 mt-10 mb-16",children:[x&&e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Search Results"}),e.jsxs("p",{className:"text-[#171717]",children:["Found ",u.length," product",u.length!==1?"s":"",' for "',x,'"']})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i&&e.jsx(Ae,{type:"product",count:8}),s&&e.jsx("p",{className:"text-red-500",children:s}),!i&&!s&&u.map(c=>e.jsx(Me,{product:c},c._id))]})]})})}function Pe(t){return b({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function Q(t){return b({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]},{tag:"line",attr:{x1:"11",y1:"8",x2:"11",y2:"14"},child:[]},{tag:"line",attr:{x1:"8",y1:"11",x2:"14",y2:"11"},child:[]}]})(t)}function He(t){return b({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]},{tag:"line",attr:{x1:"8",y1:"11",x2:"14",y2:"11"},child:[]}]})(t)}function it(){const{id:t}=me(),{addToCart:o}=H(),{wishlist:d,toggleWishlist:m}=T(),[a,u]=n.useState(null),[p,i]=n.useState(0),[r,s]=n.useState(null),[l,f]=n.useState(!1),[w,h]=n.useState(!0),[x,c]=n.useState(""),[g,C]=n.useState(0),[v,I]=n.useState(!1),[N,z]=n.useState({x:0,y:0}),[_,Z]=n.useState(!1),[R,k]=n.useState(""),[E,K]=n.useState(!1),F=n.useRef(null),B=n.useRef(null),V=()=>window.matchMedia("(max-width: 768px)").matches,ee={dots:!1,infinite:!0,speed:300,slidesToShow:1,slidesToScroll:1,fade:!0,cssEase:"linear",beforeChange:(y,j)=>C(j)};n.useEffect(()=>{async function y(){h(!0),c("");try{const j=localStorage.getItem("token"),M=await P(`/products/${t}`,{headers:j?{Authorization:`Bearer ${j}`}:{}}),L=await M.json();if(!M.ok)throw new Error(L.error||"Failed to load product");u(L),s(Number(L.avgRating)||null),i(L.userRating||0),f(L.hasBought||!1)}catch(j){c(j.message)}finally{h(!1)}}y()},[t]);const te=async y=>{c("");try{const j=localStorage.getItem("token"),M=await P(`/products/${t}/rate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`},body:JSON.stringify({rating:y})}),L=await M.json();if(!M.ok)throw new Error(L.error||"Failed to submit rating");i(y),c("Thank you for your rating!")}catch(j){c(j.message)}},se=y=>{C(y),F.current&&F.current.slickGoTo(y)},q=y=>{V()||(k(S(y)),Z(!0))},ae=y=>{if(!B.current)return;const j=B.current.getBoundingClientRect(),M=(y.clientX-j.left)/j.width*100,L=(y.clientY-j.top)/j.height*100;z({x:M,y:L})};if(w)return e.jsx("div",{className:"text-center py-20",children:"Loading..."});if(!a)return e.jsx("div",{className:"text-center py-20",children:"Product not found."});const O=a.images&&a.images.length>0?a.images:a.image?[a.image]:[];return e.jsxs("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center px-4",children:[e.jsxs("div",{className:"max-w-6xl w-full flex flex-col md:flex-row items-center md:items-start gap-10 py-12",children:[e.jsxs("div",{className:"w-full md:w-1/2 flex flex-col justify-center items-center md:items-start order-2 md:order-1",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4 text-center md:text-left",children:a.name}),a.description&&e.jsxs("div",{className:"mb-6 w-full max-w-lg mx-auto md:mx-0",children:[e.jsx("p",{className:"text-[#171717] leading-relaxed",children:E?a.description:a.description.length>150?a.description.substring(0,150)+"...":a.description}),a.description.length>150&&e.jsx("button",{className:"text-blue-600 hover:text-blue-800 font-medium mt-2",onClick:()=>K(!E),children:E?"less":"more"})]}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900 mb-8 text-center md:text-left",children:["â‚¬",a.price]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8 w-full max-w-lg mx-auto md:mx-0",children:[e.jsx("button",{onClick:()=>o({...a,quantity:1}),className:"flex-1 bg-[#DC2525] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#b71c1c] hover:scale-105 active:scale-95 transition-all duration-200",children:"Add to Cart"}),e.jsx("button",{onClick:()=>m(a._id),className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-all duration-200 ${d.includes(a._id)?"bg-pink-500 text-gray-800 hover:bg-pink-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:d.includes(a._id)?"Remove from Wishlist":"Add to Wishlist"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-8 w-full max-w-lg mx-auto md:mx-0",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"font-bold text-[#171717]",children:"Zustand:"})," ",e.jsx("span",{className:"text-[#171717]",children:a.zustand||"-"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"font-bold text-[#171717]",children:"Size (cm):"})," ",e.jsxs("span",{className:"text-[#171717]",children:[a.width||"-"," x ",a.depth||"-"," x"," ",a.height||"-"]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"font-bold text-[#171717]",children:"Brand:"})," ",e.jsx("span",{className:"text-[#171717]",children:a.brand||"-"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"font-bold text-[#171717]",children:"Model:"})," ",e.jsx("span",{className:"text-[#171717]",children:a.model||"-"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"font-bold text-[#171717]",children:"Color:"})," ",e.jsx("span",{className:"text-[#171717]",children:a.color||"-"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"font-bold text-[#171717]",children:"Material:"})," ",e.jsx("span",{className:"text-[#171717]",children:a.material||"-"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"font-bold text-[#171717]",children:"Pattern:"})," ",e.jsx("span",{className:"text-[#171717]",children:a.pattern||"-"})]})]})]}),e.jsxs("div",{className:"w-full md:w-1/2 flex flex-row-reverse gap-6 order-1 md:order-2",children:[e.jsx("div",{className:"w-4/5 relative",children:O.length>0?e.jsx(G,{...ee,initialSlide:g,ref:F,children:O.map((y,j)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:S(y),alt:`${a.name} - ${j+1}`,className:"w-full h-auto max-h-[500px] object-contain rounded-lg shadow",style:{background:"#f8f8f8"},onClick:()=>q(y)}),!V()&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-200 cursor-zoom-in",onClick:()=>q(y),children:e.jsx("div",{className:"bg-black bg-opacity-50 rounded-full p-3",children:e.jsx(Q,{className:"text-white text-2xl"})})})]},j))}):e.jsx("div",{className:"w-full h-[500px] bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("p",{className:"text-[#171717]",children:"No images available"})})}),e.jsx("div",{className:"w-1/5 flex flex-col gap-4 overflow-y-auto max-h-[500px] pr-2",children:O.map((y,j)=>e.jsx("div",{className:`cursor-pointer transition-all duration-200 ${j===g?"border-2 border-gray-900":"border border-gray-300"} rounded-lg overflow-hidden`,onClick:()=>se(j),children:e.jsx("img",{src:S(y),alt:`Thumbnail ${j+1}`,className:"w-full h-full object-cover aspect-square"})},j))})]})]}),e.jsxs("div",{className:"flex flex-col items-center mt-2 mb-8",children:[e.jsxs("div",{className:"mb-2 flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold mb-1",children:"Average rating:"}),e.jsx(D,{value:r||0,disabled:!0,onChange:()=>{},size:20}),e.jsx("span",{className:"text-xs text-[#171717] mt-1",children:r?`${r} / 5`:"No ratings yet"})]}),e.jsxs("div",{className:"mb-2 flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold mb-1",children:"Your rating:"}),e.jsx(D,{value:p,onChange:l?te:()=>{},disabled:!l,size:20}),!l&&e.jsx("span",{className:"ml-2 text-xs text-[#171717]",children:"(You can only rate products you have purchased)"})]}),x&&e.jsx("div",{className:`text-sm mt-2 px-3 py-2 rounded ${x.includes("Thank you")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:()=>Z(!1),children:e.jsxs("div",{className:"relative max-w-4xl max-h-full p-4",children:[e.jsx("button",{className:"absolute top-4 right-4 text-white text-2xl z-10",onClick:()=>Z(!1),children:"Ã—"}),e.jsx("img",{ref:B,src:R,alt:"Zoomed product",className:"max-w-full max-h-full object-contain",onMouseMove:ae,style:{transform:v?`scale(2) translate(-${N.x}%, -${N.y}%)`:"scale(1)",transformOrigin:`${N.x}% ${N.y}%`,transition:v?"none":"transform 0.3s ease"}}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:e.jsx("button",{className:"bg-white bg-opacity-20 text-white px-4 py-2 rounded mr-2",onClick:()=>I(!v),children:v?e.jsx(He,{}):e.jsx(Q,{})})})]})})]})}function ze(t){return b({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.3685 12L13.1162 3.03212L14.8838 3.9679L10.6315 12L14.8838 20.0321L13.1162 20.9679L8.3685 12Z"},child:[]}]})(t)}function W(t){return b({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15.6315 12L10.8838 3.03212L9.11622 3.9679L13.3685 12L9.11622 20.0321L10.8838 20.9679L15.6315 12Z"},child:[]}]})(t)}function lt(t){return b({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 7V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V7H2V5H22V7H20ZM6 7V20H18V7H6ZM11 9H13V11H11V9ZM11 12H13V14H11V12ZM11 15H13V17H11V15ZM7 2H17V4H7V2Z"},child:[]}]})(t)}function ot(t){return b({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 22C4 17.5817 7.58172 14 12 14C16.4183 14 20 17.5817 20 22H18C18 18.6863 15.3137 16 12 16C8.68629 16 6 18.6863 6 22H4ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11Z"},child:[]}]})(t)}const Ze="pk_test_51RdaawIHmfIW1XwW1vpUdbnY3i9lqzR8X8KfCqXzM3wgIAHGnLjOj12TzCQjq1SuBbTMVp78VwWtRqkKCOv1LC2K00ZSm5SxXl",_e=ge(Ze);function $e({items:t,total:o,userId:d,onSuccess:m}){const a=fe(),u=pe(),[p,i]=n.useState(null),[r,s]=n.useState(!1),[l,f]=n.useState(!1),w=async h=>{if(h.preventDefault(),!(!a||!u)){f(!0),i(null),s(!1);try{const{error:x,paymentIntent:c}=await a.confirmPayment({elements:u,confirmParams:{return_url:window.location.origin+"/payment-success"},redirect:"if_required"});if(x){s(!0),i(x.message),f(!1);return}if(c&&c.status==="succeeded")try{const g={userId:d,items:t.map(v=>({productId:v._id,quantity:v.quantity||1,price:v.price,name:v.name})),totalPrice:o,status:"Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡",paymentIntentId:c.id,shippingAddress:"Default Address"};if(!(await P("/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(g)})).ok)throw new Error("Failed to create order");for(const v of t)try{await P(`/inventory/${v._id}/decrease`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({quantity:v.quantity||1})})}catch(I){console.warn(`Failed to update inventory for product ${v._id}:`,I)}s(!1),i("Payment successful! Redirecting..."),setTimeout(()=>{m()},1500)}catch(g){console.error("Order creation error:",g),s(!0),i("Payment successful but order creation failed. Please contact support.")}}catch(x){s(!0),i(x.message)}f(!1)}};return e.jsxs("div",{className:"checkout-container",children:[e.jsx("h2",{children:"Complete Your Purchase"}),e.jsxs("form",{onSubmit:w,className:"checkout-form",children:[e.jsx(je,{className:"StripeElement"}),e.jsx("button",{disabled:l||!a||!u,className:"btn-primary",children:l?"Processing...":`Pay â‚¬${o.toFixed(2)}`}),p&&e.jsx("p",{className:`message ${r?"error":"success"}`,children:p})]})]})}const Te=4.99;function Re(){const{items:t,clearCart:o}=H(),{user:d}=J(),m=xe(),[a,u]=n.useState(""),[p,i]=n.useState(!0),[r,s]=n.useState(""),l=t.reduce((c,g)=>c+g.price*(g.quantity||1),0),f=l>0?Te:0,w=l+f;n.useEffect(()=>{if(t.length===0){m("/products");return}if(!d){m("/login");return}(async()=>{try{i(!0);const g=Math.round(w*100),C=await P("/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:g,items:t,userId:d.id})});if(!C.ok)throw new Error("Failed to create payment intent");const v=await C.json();u(v.clientSecret)}catch(g){s(g.message)}finally{i(!1)}})()},[t,w,d,m]);const x={clientSecret:a,appearance:{theme:"stripe"}};return p?e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),e.jsx("p",{className:"text-[#171717]",children:"Preparing checkout..."})]})}):r?e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 mb-4",children:r}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-pink-500 text-white px-4 py-2 rounded hover:bg-pink-600",children:"Try Again"})]})}):e.jsx("div",{className:"min-h-screen bg-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-8 text-[#171717]",children:"Checkout"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#171717]",children:"Order Summary"}),e.jsx("div",{className:"space-y-4 mb-6",children:t.map(c=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-white rounded",children:[e.jsx("img",{src:S(c.images?.[0]||c.image),alt:c.name,className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-[#171717]",children:c.name}),e.jsxs("p",{className:"text-[#171717]",children:["Quantity: ",c.quantity||1]})]}),e.jsxs("p",{className:"font-semibold text-[#171717]",children:["â‚¬",(c.price*(c.quantity||1)).toFixed(2)]})]},c._id))}),e.jsxs("div",{className:"border-t pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#171717]",children:"Subtotal:"}),e.jsxs("span",{className:"text-[#171717]",children:["â‚¬",l.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#171717]",children:"Shipping:"}),e.jsxs("span",{className:"text-[#171717]",children:["â‚¬",f.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[e.jsx("span",{className:"text-[#171717]",children:"Total:"}),e.jsxs("span",{className:"text-[#171717]",children:["â‚¬",w.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#171717]",children:"Payment Information"}),a&&e.jsx(be,{stripe:_e,options:x,children:e.jsx($e,{items:t,total:w,userId:d.id,onSuccess:()=>{o(),m("/payment-success")}})})]})]})]})})}const ct=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"})),Ee=4.99;function Fe(){const{items:t,removeFromCart:o,clearCart:d,increaseQuantity:m,decreaseQuantity:a}=H(),{toggleWishlist:u}=T(),p=t.reduce((s,l)=>s+l.price*(l.quantity||1),0),i=p>0?Ee:0,r=p+i;return t.length===0?e.jsxs("div",{className:"text-center mt-20",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700",children:"Your cart is empty ðŸ›’"}),e.jsx(A,{to:"/products",className:"inline-block mt-4 text-blue-600 hover:underline",children:"Back to Products"})]}):e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded shadow mt-10",children:[e.jsxs("div",{className:"md:hidden sticky top-0 z-30 bg-white border-b border-gray-200 flex items-center justify-between px-4 py-3",children:[e.jsx("span",{className:"text-xl font-bold text-[#171717]",children:"Cart"}),e.jsxs(A,{to:"/checkout",className:"bg-[#DC2525] hover:bg-[#be123c] text-white font-semibold rounded-lg px-3 py-3 text-base shadow transition",style:{minWidth:120,textAlign:"center"},children:["Checkout ",e.jsx(W,{className:"inline ml-1",size:20})]})]}),e.jsxs("div",{className:"w-full items-center justify-between mb-6 px-2 md:px-0 hidden md:flex",children:[e.jsx("span",{className:"text-xl font-bold md:text-2xl text-[#171717]",children:"Cart"}),e.jsxs("a",{href:"/checkout",className:"px-5 py-2 rounded bg-teal-700 text-white font-semibold hover:bg-teal-800 transition text-base md:text-lg shadow md:bg-red-600 md:hover:bg-red-700",style:{minWidth:120,textAlign:"center"},children:["Checkout"," ",e.jsx(W,{className:"inline ml-2 -mr-1",size:20})]})]}),e.jsx("div",{className:"-mx-6",children:e.jsx("hr",{className:"border-t-4 border-gray-300 mb-6"})}),e.jsx("ul",{className:"space-y-0",children:t.map((s,l)=>e.jsxs("li",{className:"relative pt-4 pb-6",children:[l>0&&e.jsx("div",{className:"-mx-6",children:e.jsx("hr",{className:"border-t border-gray-300 mb-4"})}),e.jsxs("div",{className:"flex gap-4 items-start min-h-[160px] relative",children:[e.jsx("button",{onClick:()=>o(s._id),className:"absolute top-2 right-2 text-black hover:text-gray-700 rounded-full w-8 h-8 flex items-center justify-center text-3xl font-thin tracking-tighter","aria-label":"Remove from cart",children:"Ã—"}),e.jsxs("div",{className:"flex flex-col items-start gap-2 flex-shrink-0",children:[(console.log("Cart item:",s),console.log("item.images:",s.images),console.log("item.image:",s.image),s.images?.length>0?e.jsx(A,{to:`/products/${s._id}`,children:e.jsx("img",{src:S(s.images[0]),alt:s.name,className:"w-24 h-24 object-cover rounded mb-1 cursor-pointer hover:opacity-90 transition"})}):s.image?e.jsx(A,{to:`/products/${s._id}`,children:e.jsx("img",{src:S(s.image),alt:s.name,className:"w-24 h-24 object-cover rounded mb-1 cursor-pointer hover:opacity-90 transition"})}):e.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded mb-1 flex items-center justify-center text-[#171717] text-xs",children:"No Image"})),e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("label",{className:"text-xs text-[#171717] mb-1",htmlFor:`qty-${s._id}`,children:"Quantity"}),e.jsxs("div",{className:"relative w-20",children:[e.jsx("select",{id:`qty-${s._id}`,className:"block w-full border border-gray-300 rounded-xl px-3 py-2 pr-8 appearance-none focus:outline-none focus:ring-2 focus:ring-teal-500 bg-white text-[#171717]",value:s.quantity||1,onChange:f=>{const h=parseInt(f.target.value)-(s.quantity||1);if(h>0)for(let x=0;x<h;x++)m(s._id);else if(h<0)for(let x=0;x<-h;x++)a(s._id)},children:[1,2,3,4,5].map(f=>e.jsx("option",{value:f,className:"text-[#171717]",children:f},f))}),e.jsx(Pe,{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-[#171717]",size:20})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-1 min-w-[120px] pr-6",children:[e.jsx("p",{className:"font-semibold text-base mb-1 text-[#171717]",children:s.name}),e.jsx("button",{className:"text-[#171717] text-sm hover:text-pink-600 dark:hover:text-pink-400 transition w-fit",onClick:()=>{u(s._id),o(s._id)},children:"Add to Wishlist"}),e.jsx("div",{className:"border-b border-gray-200 w-full mt-1 mb-2"}),e.jsxs("span",{className:"absolute bottom-4 right-4 text-sm font-bold text-[#171717]",children:["â‚¬",s.price.toFixed(2)]})]})]})]},s._id))}),e.jsx("div",{className:"-mx-6",children:e.jsx("hr",{className:"border-t-4 border-gray-300 mb-6"})}),e.jsxs("div",{className:"mt-6 space-y-2 pt-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[#171717]",children:"Subtotal:"}),e.jsxs("p",{className:"font-medium text-[#171717]",children:["â‚¬",p.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[#171717]",children:"Shipping costs:"}),e.jsxs("p",{className:"font-medium text-[#171717]",children:["â‚¬",i.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-300 pt-2 mt-2",children:[e.jsx("p",{className:"text-lg font-bold text-[#171717]",children:"Total:"}),e.jsxs("p",{className:"text-lg font-bold text-[#171717]",children:["â‚¬",r.toFixed(2)]}),e.jsx("p",{className:"text-xs font-light text-[#171717] text-center mt-1",children:"All prices are in euros and include VAT"})]})]}),e.jsxs("div",{className:"md:hidden mt-6 flex flex-col gap-4",children:[e.jsxs(A,{to:"/checkout",className:"w-full flex items-center justify-between bg-[#DC2525] hover:bg-[#be123c] text-white font-bold text-lg rounded-2xl py-4 px-6 shadow transition",style:{minHeight:56},children:[e.jsx("span",{className:"mx-auto",children:"Checkout"}),e.jsx(W,{size:28})]}),e.jsxs(A,{to:"/products",className:"w-full flex items-center justify-between bg-gray-100 hover:bg-gray-200 text-black font-semibold text-lg rounded-2xl py-4 px-6 shadow transition",style:{minHeight:56},children:[e.jsx(ze,{size:28}),e.jsx("span",{className:"mx-auto",children:"Continue shopping"})]})]})]})}const dt=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"}));export{ve as A,Xe as C,Q as F,$ as O,rt as P,ot as R,D as S,Je as W,T as a,Ke as b,at as c,tt as d,st as e,Qe as f,nt as g,it as h,Ge as i,Ye as j,et as k,lt as l,Me as m,G as n,He as o,ct as p,dt as q,H as u};
