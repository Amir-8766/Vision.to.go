import{j as s,g as b,a as x}from"./admin-CjE1p_fZ.js";import{r as o,L as N}from"./router-DqluUKdp.js";import{a as w,u as v,A as y,l as C,S as R}from"./shop-NOs0Rz2B.js";import"./icons-CDVIwAiG.js";import"./charts-hD1MI6At.js";import"./vendor-Tt9FPAzf.js";import"./slick-JyPX3RhO.js";import"./stripe-DnwkPVAo.js";import"./auth-Tf0T-Vub.js";function _(){const{wishlist:r,toggleWishlist:h,refreshWishlist:g}=w(),{addToCart:u}=v(),[c,p]=o.useState([]),[n,f]=o.useState([]),[j,m]=o.useState(!0);o.useEffect(()=>{async function e(){try{m(!0);const a=await(await x("/products")).json();p(a);const d=await(await x("/commission")).json();f(d),console.log("Products loaded:",a.length),console.log("Commission products loaded:",d.length)}catch(i){console.error("Error fetching products:",i)}finally{m(!1)}}e()},[]);const l=[...c,...n],t=l.filter(e=>r.includes(e._id));return console.log("Debug Wishlist:"),console.log("- Wishlist IDs:",r),console.log("- Regular products:",c.length),console.log("- Commission products:",n.length),console.log("- All products:",l.length),console.log("- Wishlist products found:",t.length),console.log("- localStorage wishlist:",JSON.parse(localStorage.getItem("wishlistItems")||"[]")),console.log("- Sample product data:",l[0]),console.log("- Wishlist products data:",t),j?s.jsx("div",{className:"max-w-4xl mx-auto px-4 pt-6 pb-20",children:s.jsxs("div",{className:"text-center mt-20",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto"}),s.jsx("p",{className:"mt-4",children:"Loading products..."})]})}):s.jsxs("div",{className:"max-w-4xl mx-auto px-4 pt-6 pb-20",children:[s.jsx("div",{className:"mb-6 flex justify-center md:justify-start",children:s.jsx(N,{to:"/products",className:"inline-block px-4 py-2 bg-[#DC2525] text-white rounded-lg font-medium hover:bg-[#b71c1c] transition",children:"← Back to Products"})}),s.jsx("div",{className:"flex flex-col gap-0",children:t.length===0?s.jsxs("div",{className:"text-center mt-20 col-span-full",children:[s.jsx(y,{size:40,className:"mx-auto text-pink-400"}),s.jsx("h2",{className:"text-xl mt-4 text-[#171717]",children:"Your wishlist is empty!"}),s.jsxs("div",{className:"mt-4 p-4 bg-gray-100 rounded-lg text-left max-w-md mx-auto",children:[s.jsx("h3",{className:"font-semibold mb-2 text-[#171717]",children:"Debug Info:"}),s.jsxs("p",{className:"text-[#171717]",children:["Wishlist IDs: ",JSON.stringify(r)]}),s.jsxs("p",{className:"text-[#171717]",children:["Regular products: ",c.length]}),s.jsxs("p",{className:"text-[#171717]",children:["Commission products: ",n.length]}),s.jsxs("p",{className:"text-[#171717]",children:["All products: ",l.length]}),s.jsxs("p",{className:"text-[#171717]",children:["Wishlist products found: ",t.length]}),s.jsx("button",{onClick:g,className:"mt-2 px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"Refresh Wishlist"})]})]}):t.map((e,i)=>s.jsxs("div",{children:[s.jsxs("div",{className:"sm:bg-white sm:border sm:rounded-xl sm:shadow sm:p-4 flex flex-row gap-4 items-start ",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center w-32 sm:w-24 flex-shrink-0",children:[s.jsx("img",{src:b(e.image||e.images?.[0]||""),alt:e.name,className:"w-28 h-28 sm:w-20 sm:h-20 object-cover rounded border",onError:a=>{a.target.src="/placeholder-image.jpg"}}),s.jsxs("div",{className:"text-xs text-[#171717] mt-2 flex items-center gap-1",children:["📦 ",s.jsx("span",{children:"Available - 2-3 working days"})]}),s.jsxs("button",{onClick:()=>h(e._id),className:"flex items-center gap-2 text-white border border-gray-300 rounded px-3 py-1 mt-10 w-auto sm:w-auto justify-center bg-gray-800 hover:bg-gray-700 transition text-sm",children:[s.jsx(C,{}),"Remove"]})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-between pl-2",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900",children:e.name}),s.jsx("p",{className:"text-[#171717] text-sm",children:e.description}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(R,{value:e.avgRating||0,disabled:!0}),s.jsxs("span",{className:"text-xs text-[#171717]",children:["(",e.ratings?.length||0,")"]})]})]}),s.jsx("div",{className:"flex flex-col sm:flex-row justify-end items-end gap-2 mt-9 sm:mt-12",children:s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsxs("span",{className:"text-lg font-bold text-[#DC2525] mb-1",children:["€",e.price.toFixed(2)]}),s.jsx("button",{onClick:()=>u(e),className:"w-full sm:w-auto px-3 py-1 bg-[#DC2525] text-white rounded hover:bg-[#b71c1c] hover:scale-105 hover:shadow-lg active:scale-95 active:bg-[#8e0000] transform transition-all duration-200 ease-in-out text-sm font-semibold",children:"Add to Cart"})]})})]})]}),i<t.length-1&&s.jsx("div",{className:"block sm:hidden -mx-4 my-4",children:s.jsx("hr",{className:"border-t-2 border-gray-200"})})]},e._id))})]})}export{_ as default};
