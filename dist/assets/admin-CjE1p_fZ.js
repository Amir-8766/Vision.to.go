import{r as u}from"./router-DqluUKdp.js";import{G as T}from"./icons-CDVIwAiG.js";import{R as ue,B as Ee,C as Ne,X as we,Y as Ce,T as me,a as ze,A as Fe,b as Ae,P as Oe,c as Ie,d as Me,L as Re}from"./charts-hD1MI6At.js";var oe={exports:{}},re={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var be;function Ue(){if(be)return re;be=1;var r=Symbol.for("react.transitional.element"),y=Symbol.for("react.fragment");function C(f,x,N){var g=null;if(N!==void 0&&(g=""+N),x.key!==void 0&&(g=""+x.key),"key"in x){N={};for(var L in x)L!=="key"&&(N[L]=x[L])}else N=x;return x=N.ref,{$$typeof:r,type:f,key:g,ref:x!==void 0?x:null,props:N}}return re.Fragment=y,re.jsx=C,re.jsxs=C,re}var ve;function $e(){return ve||(ve=1,oe.exports=Ue()),oe.exports}var e=$e();const ee="http://127.0.0.1:10000",K=r=>r?r.startsWith("http://")||r.startsWith("https://")?r:r.startsWith("/uploads/")?ee+r:r:"",z=async(r,y={})=>{const C=`${ee}${r}`,f=localStorage.getItem("token"),x={headers:{"Content-Type":"application/json",...f&&{Authorization:`Bearer ${f}`},...y.headers}},N={...x,...y,headers:{...x.headers,...y.headers}};try{return await fetch(C,N)}catch(g){throw console.error("API Fetch Error:",g),g}};function ht(r){return T({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(r)}function xt(r){return T({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(r)}function gt(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(r)}function pt(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"},child:[]}]})(r)}function ft(r){return T({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M204 6.5C101.4 6.5 0 74.9 0 185.6 0 256 39.6 296 63.6 296c9.9 0 15.6-27.6 15.6-35.4 0-9.3-23.7-29.1-23.7-67.8 0-80.4 61.2-137.4 140.4-137.4 68.1 0 118.5 38.7 118.5 109.8 0 53.1-21.3 152.7-90.3 152.7-24.9 0-46.2-18-46.2-43.8 0-37.8 26.4-74.4 26.4-113.4 0-66.2-93.9-54.2-93.9 25.8 0 16.8 2.1 35.4 9.6 50.7-13.8 59.4-42 147.9-42 209.1 0 18.9 2.7 37.5 4.5 56.4 3.4 3.8 1.7 3.4 6.9 1.5 50.4-69 48.6-82.5 71.4-172.8 12.3 23.4 44.1 36 69.3 36 106.2 0 153.9-103.5 153.9-196.8C384 71.3 298.2 6.5 204 6.5z"},child:[]}]})(r)}function bt(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"},child:[]}]})(r)}function vt(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(r)}function Be(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"},child:[]}]})(r)}function Ve(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(r)}function Q(r){return T({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(r)}function He(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(r)}function _e(r){return T({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(r)}function ae(r){return T({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(r)}function qe(r){return T({attr:{viewBox:"0 0 544 512"},child:[{tag:"path",attr:{d:"M527.79 288H290.5l158.03 158.03c6.04 6.04 15.98 6.53 22.19.68 38.7-36.46 65.32-85.61 73.13-140.86 1.34-9.46-6.51-17.85-16.06-17.85zm-15.83-64.8C503.72 103.74 408.26 8.28 288.8.04 279.68-.59 272 7.1 272 16.24V240h223.77c9.14 0 16.82-7.68 16.19-16.8zM224 288V50.71c0-9.55-8.39-17.4-17.84-16.06C86.99 51.49-4.1 155.6.14 280.37 4.5 408.51 114.83 513.59 243.03 511.98c50.4-.63 96.97-16.87 135.26-44.03 7.9-5.6 8.42-17.23 1.57-24.08L224 288z"},child:[]}]})(r)}function jt(r){return T({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(r)}function yt(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(r)}function We(r){return T({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(r)}function Ge(r){return T({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(r)}function Nt(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(r)}function wt(r){return T({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.52 255.82c-69.97-.85-126.47-57.69-126.47-127.86-70.17 0-127-56.49-127.86-126.45-27.26-4.14-55.13.3-79.72 12.82l-69.13 35.22a132.221 132.221 0 0 0-57.79 57.81l-35.1 68.88a132.645 132.645 0 0 0-12.82 80.95l12.08 76.27a132.521 132.521 0 0 0 37.16 72.96l54.77 54.76a132.036 132.036 0 0 0 72.71 37.06l76.71 12.15c27.51 4.36 55.7-.11 80.53-12.76l69.13-35.21a132.273 132.273 0 0 0 57.79-57.81l35.1-68.88c12.56-24.64 17.01-52.58 12.91-79.91zM176 368c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm32-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm160 128c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(r)}function de(r){return T({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(r)}function he(r){return T({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(r)}function Ct(r){return T({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(r)}function Je(r){return T({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M310.706 413.765c-1.314-6.63-7.835-10.872-14.424-9.369-10.692 2.439-27.422 5.413-45.426 5.413-56.763 0-101.929-34.79-121.461-85.449h113.689a12 12 0 0 0 11.708-9.369l6.373-28.36c1.686-7.502-4.019-14.631-11.708-14.631H115.22c-1.21-14.328-1.414-28.287.137-42.245H261.95a12 12 0 0 0 11.723-9.434l6.512-29.755c1.638-7.484-4.061-14.566-11.723-14.566H130.184c20.633-44.991 62.69-75.03 117.619-75.03 14.486 0 28.564 2.25 37.851 4.145 6.216 1.268 12.347-2.498 14.002-8.623l11.991-44.368c1.822-6.741-2.465-13.616-9.326-14.917C290.217 34.912 270.71 32 249.635 32 152.451 32 74.03 92.252 45.075 176H12c-6.627 0-12 5.373-12 12v29.755c0 6.627 5.373 12 12 12h21.569c-1.009 13.607-1.181 29.287-.181 42.245H12c-6.627 0-12 5.373-12 12v28.36c0 6.627 5.373 12 12 12h30.114C67.139 414.692 145.264 480 249.635 480c26.301 0 48.562-4.544 61.101-7.788 6.167-1.595 10.027-7.708 8.788-13.957l-8.818-44.49z"},child:[]}]})(r)}function kt(r){return T({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(r)}function Ye(r){return T({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(r)}function xe(r){return T({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(r)}function je(r){return T({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(r)}function Pt(r){return T({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(r)}function St(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(r)}function Ze(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(r)}function Dt(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(r)}function ce(r){return T({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(r)}function Xe(r){return T({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(r)}function ke(r){return T({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(r)}function ye(r){return T({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(r)}const Ke=({size:r="medium",color:y="pink",text:C="Loading...",fullScreen:f=!1})=>{const x={small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12",xlarge:"w-16 h-16"},N={pink:"border-pink-500",blue:"border-blue-500",green:"border-green-500",gray:"border-gray-500"},g=e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:`${x[r]} ${N[y]} border-2 border-t-transparent rounded-full animate-spin`}),C&&e.jsx("p",{className:"mt-2 text-sm text-[#171717] animate-pulse",children:C})]});return f?e.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:g}):g};function Qe(){const[r,y]=u.useState([]),[C,f]=u.useState([]),[x,N]=u.useState([]),[g,L]=u.useState(!0),[B,A]=u.useState(!0),[E,I]=u.useState(!0),[S,v]=u.useState(""),[m,o]=u.useState("products"),[d,b]=u.useState({name:"",price:"",originalPrice:"",isDiscounted:!1,discountLabel:"Last Chance",description:"",zustand:"",width:"",depth:"",height:"",brand:"",model:"",color:"",material:"",pattern:""}),[D,j]=u.useState(null),[i,h]=u.useState({name:"",price:"",originalPrice:"",isDiscounted:!1,discountLabel:"Last Chance",description:"",zustand:"",width:"",depth:"",height:"",brand:"",model:"",color:"",material:"",pattern:"",images:[]}),[n,c]=u.useState({name:"",price:"",originalPrice:"",isDiscounted:!1,discountLabel:"Last Chance",commissionRate:30,partnerName:"",partnerLogo:"",partnerDescription:"",category:"",images:[]}),[O,G]=u.useState(null),[Y,M]=u.useState(""),[W,p]=u.useState([]),[F,V]=u.useState(0),[R,H]=u.useState({name:"",description:"",website:"",instagram:"",category:"education",services:"",partnershipType:"geschaeftspartner",isActive:!0,logo:"",featuredImage:""}),[l,P]=u.useState(null),[w,_]=u.useState({name:"",description:"",website:"",instagram:"",category:"education",services:"",partnershipType:"geschaeftspartner",isActive:!0,logo:"",featuredImage:""});u.useEffect(()=>{Z(),ie(),J()},[]);async function Z(){L(!0);try{const s=await(await z("/products")).json();y(s)}catch{v("Error fetching products")}finally{L(!1)}}async function J(){I(!0);try{const t=localStorage.getItem("token"),s=await z("/partners/admin",{headers:t?{Authorization:`Bearer ${t}`}:{}}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to load partners");N(a)}catch{v("Error fetching partners")}finally{I(!1)}}async function ne(t){t.preventDefault();try{const s=localStorage.getItem("token"),a={...R,logo:R.logo,featuredImage:R.featuredImage,services:R.services?R.services.split(",").map(q=>q.trim()):[]},k=await z("/partners",{method:"POST",headers:{Authorization:`Bearer ${s}`},body:JSON.stringify(a)}),U=await k.json();if(!k.ok)throw new Error(U.error||"Failed to add partner");H({name:"",description:"",website:"",instagram:"",category:"education",services:"",partnershipType:"geschaeftspartner",isActive:!0,logo:"",featuredImage:""}),J()}catch{v("Error adding partner")}}async function Se(t){try{const s=localStorage.getItem("token"),a={...w,logo:w.logo,featuredImage:w.featuredImage,services:w.services?w.services.split(",").map(q=>q.trim()):[]},k=await z(`/partners/${t}`,{method:"PUT",headers:{Authorization:`Bearer ${s}`},body:JSON.stringify(a)}),U=await k.json();if(!k.ok)throw new Error(U.error||"Failed to update partner");P(null),J()}catch{v("Error updating partner")}}async function De(t){if(window.confirm("Are you sure?"))try{const s=localStorage.getItem("token"),a=await z(`/partners/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}}),k=await a.json().catch(()=>({}));if(!a.ok)throw new Error(k.error||"Failed to delete partner");J()}catch{v("Error deleting partner")}}async function ie(){A(!0);try{const s=await(await z("/commission")).json();f(s)}catch{v("Error fetching commission products")}finally{A(!1)}}async function Le(t){if(t.preventDefault(),d.isDiscounted&&d.originalPrice&&parseFloat(d.originalPrice)<=parseFloat(d.price)){v("Original Price must be HIGHER than Current Price! Original Price is the old/higher price that will be crossed out.");return}if(d.isDiscounted&&!d.originalPrice){v("If you mark as discounted, you must enter an Original Price!");return}try{const s={name:d.name,price:parseFloat(d.price),originalPrice:d.originalPrice?parseFloat(d.originalPrice):void 0,isDiscounted:d.isDiscounted,discountLabel:d.discountLabel,description:d.description,zustand:d.zustand,width:d.width,depth:d.depth,height:d.height,brand:d.brand,model:d.model,color:d.color,material:d.material,pattern:d.pattern,image:W[0]||Y,images:W};if(console.log("Sending product data:",s),!(await z("/products",{method:"POST",body:JSON.stringify(s)})).ok)throw new Error("Error adding product");b({name:"",price:"",originalPrice:"",isDiscounted:!1,discountLabel:"Last Chance",description:"",zustand:"",width:"",depth:"",height:"",brand:"",model:"",color:"",material:"",pattern:""}),M(""),G(null),p([]),Z()}catch{v("Error adding product")}}async function Te(t){if(t.preventDefault(),n.isDiscounted&&n.originalPrice&&parseFloat(n.originalPrice)<=parseFloat(n.price)){v("Original Price must be HIGHER than Current Price! Original Price is the old/higher price that will be crossed out.");return}if(n.isDiscounted&&!n.originalPrice){v("If you mark as discounted, you must enter an Original Price!");return}try{const s={name:n.name,price:parseFloat(n.price),originalPrice:n.originalPrice?parseFloat(n.originalPrice):void 0,isDiscounted:n.isDiscounted,discountLabel:n.discountLabel,commissionRate:parseFloat(n.commissionRate),partnerName:n.partnerName,partnerLogo:n.partnerLogo,partnerDescription:n.partnerDescription,category:n.category,images:W};if(console.log("Sending commission data:",s),!(await z("/commission",{method:"POST",body:JSON.stringify(s)})).ok)throw new Error("Error adding commission product");c({name:"",price:"",originalPrice:"",isDiscounted:!1,discountLabel:"Last Chance",commissionRate:30,partnerName:"",partnerLogo:"",partnerDescription:"",category:"",images:[]}),M(""),G(null),p([]),V(0),ie()}catch{v("Error adding commission product")}}async function ge(t){if(window.confirm("Are you sure?"))try{await z(`${m==="commission"?"/commission":"/products"}/${t}`,{method:"DELETE"}),m==="commission"?ie():Z()}catch{v("Error deleting product")}}const pe=t=>{const s=Array.from(t.target.files);G(s[0]),p([]),V(s.length),m==="commission"&&console.log("Commission product images selected:",s)},fe=async()=>{try{let t;if(m==="commission"?t=document.getElementById("commission-product-images"):t=document.querySelector('input[type="file"]'),!t||!t.files||t.files.length===0){v("Please select files to upload");return}const s=Array.from(t.files);console.log("Uploading files:",s);for(const a of s){const k=new FormData;k.append("image",a);const U=await fetch(ee+"/products/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:k});if(!U.ok)throw new Error(`Failed to upload ${a.name}`);const q=await U.json();p(te=>[...te,q.imageUrl])}M(""),G(null),V(0),console.log("Upload completed. Total images:",W.length+s.length)}catch(t){v(`Error uploading images: ${t.message}`)}};return e.jsxs("div",{className:"admin-page max-w-2xl mx-auto p-6 bg-white rounded shadow mt-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Product Management"}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>o("products"),className:`px-4 py-2 rounded ${m==="products"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Regular Products"}),e.jsx("button",{onClick:()=>o("commission"),className:`px-4 py-2 rounded ${m==="commission"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Commission Products"}),e.jsx("button",{onClick:()=>o("partners"),className:`px-4 py-2 rounded ${m==="partners"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Partners"})]}),m==="products"&&e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:Le,className:"mb-6 space-y-2",children:[e.jsx("div",{className:"font-bold",children:"Product Name"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Product Name",value:d.name,onChange:t=>b(s=>({...s,name:t.target.value})),required:!0}),e.jsx("div",{className:"font-bold",children:"Current Price (Lower Price - What customer pays)"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Current Price (Lower Price)",type:"number",value:d.price,onChange:t=>b(s=>({...s,price:t.target.value})),required:!0}),e.jsx("div",{className:"font-bold",children:"Original Price (Optional - for discounts only)"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Original Price (Higher Price)",type:"number",value:d.originalPrice,onChange:t=>b(s=>({...s,originalPrice:t.target.value}))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isDiscounted",checked:d.isDiscounted,onChange:t=>b(s=>({...s,isDiscounted:t.target.checked})),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"isDiscounted",className:"font-bold",children:"Mark as Discounted"})]}),d.isDiscounted&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 p-2 rounded border",children:["💡 ",e.jsx("strong",{children:"Discount Mode Active:"}),e.jsx("br",{}),"- Original Price is now required",e.jsx("br",{}),"- Original Price must be HIGHER than Current Price",e.jsx("br",{}),"Example: Original: €15.99, Current: €12.99"]}),e.jsx("div",{className:"font-bold",children:"Discount Label"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Discount Label (e.g., Last Chance)",value:d.discountLabel,onChange:t=>b(s=>({...s,discountLabel:t.target.value}))})]}),e.jsx("div",{className:"font-bold",children:"Description"}),e.jsx("textarea",{className:"w-full border p-2 rounded",placeholder:"Description",value:d.description,onChange:t=>b(s=>({...s,description:t.target.value}))}),e.jsx("div",{className:"font-bold",children:"Zustand"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:d.zustand,onChange:t=>b(s=>({...s,zustand:t.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Zustand"}),e.jsx("option",{value:"New",children:"New"}),e.jsx("option",{value:"Like New",children:"Like New"}),e.jsx("option",{value:"Very Good",children:"Very Good"}),e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Acceptable",children:"Acceptable"}),e.jsx("option",{value:"For Parts / Not Working",children:"For Parts / Not Working"})]}),e.jsx("div",{className:"font-bold",children:"Size (cm)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"border p-2 rounded w-1/3",placeholder:"Width",type:"number",value:d.width,onChange:t=>b(s=>({...s,width:t.target.value}))}),e.jsx("input",{className:"border p-2 rounded w-1/3",placeholder:"Depth",type:"number",value:d.depth,onChange:t=>b(s=>({...s,depth:t.target.value}))}),e.jsx("input",{className:"border p-2 rounded w-1/3",placeholder:"Height",type:"number",value:d.height,onChange:t=>b(s=>({...s,height:t.target.value}))})]}),e.jsx("div",{className:"font-bold",children:"Details"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Brand",value:d.brand,onChange:t=>b(s=>({...s,brand:t.target.value}))}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Model",value:d.model,onChange:t=>b(s=>({...s,model:t.target.value}))}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Color",value:d.color,onChange:t=>b(s=>({...s,color:t.target.value}))}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Material",value:d.material,onChange:t=>b(s=>({...s,material:t.target.value}))}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Pattern",value:d.pattern,onChange:t=>b(s=>({...s,pattern:t.target.value}))}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:pe,className:"w-full border p-2 rounded"}),F>0&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded border",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["Selected Files (",F,"):"]}),e.jsx("div",{className:"space-y-1",children:(()=>{let t;return m==="commission"?t=document.getElementById("commission-product-images"):t=document.querySelector('input[type="file"]'),t&&t.files?Array.from(t.files).map((s,a)=>e.jsxs("div",{className:"text-sm text-gray-600",children:["📷 ",s.name," (",(s.size/1024/1024).toFixed(2)," MB)"]},a)):[]})()})]}),e.jsxs("button",{type:"button",onClick:fe,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",disabled:F===0,children:["Upload"," ",F>0?`${F} Images`:"Images"]}),W.length>0&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:W.map((t,s)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:K(t),alt:"Preview",width:60,loading:"lazy",decoding:"async"}),e.jsx("button",{type:"button",className:"absolute top-0 right-0 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",onClick:()=>p(a=>a.filter((k,U)=>U!==s)),children:"×"})]},s))}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Add Product"})]}),g?e.jsx("p",{children:"Loading..."}):e.jsx("ul",{className:"space-y-2",children:r.map(t=>e.jsx("li",{className:"flex justify-between items-center border p-2 rounded",children:D===t._id?e.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),i.isDiscounted&&i.originalPrice&&parseFloat(i.originalPrice)<=parseFloat(i.price)){v("Original Price must be HIGHER than Current Price! Original Price is the old/higher price that will be crossed out.");return}if(i.isDiscounted&&!i.originalPrice){v("If you mark as discounted, you must enter an Original Price!");return}try{const a={name:i.name,price:parseFloat(i.price),originalPrice:i.originalPrice?parseFloat(i.originalPrice):void 0,isDiscounted:i.isDiscounted,discountLabel:i.discountLabel,description:i.description,zustand:i.zustand,width:i.width,depth:i.depth,height:i.height,brand:i.brand,model:i.model,color:i.color,material:i.material,pattern:i.pattern,image:i.images&&i.images[0]||t.image,images:i.images||[]};await z(`/products/${t._id}`,{method:"PUT",body:JSON.stringify(a)}),j(null),Z()}catch{v("Error editing product")}},className:"flex flex-col gap-1 w-full",children:[e.jsx("input",{className:"border p-1 rounded",value:i.name,onChange:s=>h(a=>({...a,name:s.target.value})),required:!0}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Current Price (Lower Price)",type:"number",value:i.price,onChange:s=>{const a=s.target.value;h(k=>({...k,price:a,originalPrice:k.originalPrice&&parseFloat(a)<parseFloat(k.originalPrice)?k.originalPrice:k.price||k.originalPrice}))},required:!0}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Original Price (Higher Price)",type:"number",value:i.originalPrice,onChange:s=>h(a=>({...a,originalPrice:s.target.value}))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isDiscounted",checked:i.isDiscounted,onChange:s=>h(a=>({...a,isDiscounted:s.target.checked})),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"isDiscounted",className:"font-bold",children:"Mark as Discounted"})]}),i.isDiscounted&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 p-2 rounded border",children:["💡 ",e.jsx("strong",{children:"How to set discounted price:"}),e.jsx("br",{}),"1. Original Price: Keep the current/higher price (will be crossed out)",e.jsx("br",{}),"2. Current Price: Enter the new/lower price (what customer pays)",e.jsx("br",{}),"Example: Original: €15.99, Current: €12.99"]}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Discount Label (e.g., Last Chance)",value:i.discountLabel,onChange:s=>h(a=>({...a,discountLabel:s.target.value}))})]}),e.jsx("textarea",{className:"border p-1 rounded",value:i.description,onChange:s=>h(a=>({...a,description:s.target.value}))}),e.jsxs("select",{className:"border p-1 rounded",value:i.zustand,onChange:s=>h(a=>({...a,zustand:s.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Zustand"}),e.jsx("option",{value:"New",children:"New"}),e.jsx("option",{value:"Like New",children:"Like New"}),e.jsx("option",{value:"Very Good",children:"Very Good"}),e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Acceptable",children:"Acceptable"}),e.jsx("option",{value:"For Parts / Not Working",children:"For Parts / Not Working"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"border p-1 rounded w-1/3",placeholder:"Width",type:"number",value:i.width,onChange:s=>h(a=>({...a,width:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded w-1/3",placeholder:"Depth",type:"number",value:i.depth,onChange:s=>h(a=>({...a,depth:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded w-1/3",placeholder:"Height",type:"number",value:i.height,onChange:s=>h(a=>({...a,height:s.target.value}))})]}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Brand",value:i.brand,onChange:s=>h(a=>({...a,brand:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Model",value:i.model,onChange:s=>h(a=>({...a,model:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Color",value:i.color,onChange:s=>h(a=>({...a,color:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Material",value:i.material,onChange:s=>h(a=>({...a,material:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Pattern",value:i.pattern,onChange:s=>h(a=>({...a,pattern:s.target.value}))}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async s=>{const a=Array.from(s.target.files);for(const k of a){const U=new FormData;U.append("image",k);const te=await(await fetch(ee+"/products/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:U})).json();h(se=>({...se,images:[...se.images||[],te.imageUrl]}))}}}),i.images&&i.images.length>0&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:i.images.map((s,a)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:K(s),alt:"Preview",width:60}),e.jsx("button",{type:"button",className:"absolute top-0 right-0 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",onClick:()=>h(k=>({...k,images:k.images.filter((U,q)=>q!==a)})),children:"×"})]},a))}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("button",{type:"submit",className:"bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Save"}),e.jsx("button",{type:"button",className:"bg-gray-300 px-2 py-1 rounded",onClick:()=>j(null),children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("b",{children:t.name})," -",t.isDiscounted&&t.originalPrice?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"line-through text-red-500",children:["€",t.originalPrice]}),e.jsxs("span",{className:"text-green-600 font-bold",children:["€",t.price]}),e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded text-xs",children:t.discountLabel})]}):e.jsxs("span",{children:["€",t.price]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Debug: price=",t.price,", originalPrice=",t.originalPrice,", isDiscounted=",t.isDiscounted,", discountLabel=",t.discountLabel]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Condition:"," ",t.isDiscounted&&t.originalPrice?"TRUE - Showing discounted":"FALSE - Showing normal price"]}),e.jsx("div",{className:"text-sm text-gray-500",children:t.description}),t.image&&e.jsx("img",{src:K(t.image),alt:t.name,width:60})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{j(t._id),h({name:t.name,price:t.price,originalPrice:t.originalPrice||t.price,isDiscounted:t.isDiscounted||!1,discountLabel:t.discountLabel||"Last Chance",description:t.description,zustand:t.zustand||"",width:t.width||"",depth:t.depth||"",height:t.height||"",brand:t.brand||"",model:t.model||"",color:t.color||"",material:t.material||"",pattern:t.pattern||"",images:t.images||[]})},className:"text-blue-600 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>ge(t._id),className:"text-red-600 hover:underline",children:"Delete"})]})]})},t._id))}),S&&e.jsx("div",{className:"text-red-500 mt-2",children:S})]}),m==="commission"&&e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:Te,className:"mb-6 space-y-2",children:[e.jsx("div",{className:"font-bold",children:"Commission Product Name"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Commission Product Name",value:n.name,onChange:t=>c(s=>({...s,name:t.target.value})),required:!0}),e.jsx("div",{className:"font-bold",children:"Current Price (Lower Price - What customer pays)"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Current Price (Lower Price)",type:"number",value:n.price,onChange:t=>c(s=>({...s,price:t.target.value})),required:!0}),e.jsx("div",{className:"font-bold",children:"Original Price (Optional - for discounts only)"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Original Price (Higher Price)",type:"number",value:n.originalPrice,onChange:t=>c(s=>({...s,originalPrice:t.target.value}))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isDiscounted",checked:n.isDiscounted,onChange:t=>c(s=>({...s,isDiscounted:t.target.checked})),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"isDiscounted",className:"font-bold",children:"Mark as Discounted"})]}),n.isDiscounted&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 p-2 rounded border",children:["💡 ",e.jsx("strong",{children:"Discount Mode Active:"}),e.jsx("br",{}),"- Original Price is now required",e.jsx("br",{}),"- Original Price must be HIGHER than Current Price",e.jsx("br",{}),"Example: Original: €15.99, Current: €12.99"]}),e.jsx("div",{className:"font-bold",children:"Discount Label"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Discount Label (e.g., Last Chance)",value:n.discountLabel,onChange:t=>c(s=>({...s,discountLabel:t.target.value}))})]}),m==="partners"&&e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:ne,className:"mb-6 space-y-2",children:[e.jsx("div",{className:"font-bold",children:"Name"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Name",value:R.name,onChange:t=>H(s=>({...s,name:t.target.value})),required:!0}),e.jsx("div",{className:"font-bold",children:"Website (https://...)"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"https://example.com",value:R.website,onChange:t=>H(s=>({...s,website:t.target.value})),required:!0}),e.jsx("div",{className:"font-bold",children:"Instagram (optional)"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"https://instagram.com/...",value:R.instagram,onChange:t=>H(s=>({...s,instagram:t.target.value}))}),e.jsx("div",{className:"font-bold",children:"Description"}),e.jsx("textarea",{className:"w-full border p-2 rounded",placeholder:"Short description",value:R.description,onChange:t=>H(s=>({...s,description:t.target.value})),required:!0}),e.jsx("div",{className:"font-bold",children:"Category"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:R.category,onChange:t=>H(s=>({...s,category:t.target.value})),children:[e.jsx("option",{value:"education",children:"Education & Training"}),e.jsx("option",{value:"natural_products",children:"Natural Products"}),e.jsx("option",{value:"fashion",children:"Fashion"}),e.jsx("option",{value:"health_wellness",children:"Health & Wellness"}),e.jsx("option",{value:"beauty",children:"Beauty"}),e.jsx("option",{value:"sustainability",children:"Sustainability"}),e.jsx("option",{value:"other",children:"Other"})]}),e.jsx("div",{className:"font-bold",children:"Services (comma separated)"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Service A, Service B",value:R.services,onChange:t=>H(s=>({...s,services:t.target.value}))}),e.jsx("div",{className:"font-bold",children:"Partnership Type"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:R.partnershipType,onChange:t=>H(s=>({...s,partnershipType:t.target.value})),children:[e.jsx("option",{value:"geschaeftspartner",children:"Geschäftspartner"}),e.jsx("option",{value:"synergin",children:"Synergin"})]}),e.jsx("div",{className:"font-bold",children:"Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:async t=>{const s=t.target.files&&t.target.files[0];if(!s)return;const a=new FormData;a.append("image",s);const U=await(await fetch(ee+"/products/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:a})).json();H(q=>({...q,logo:U.imageUrl}))},className:"w-full border p-2 rounded"}),R.logo&&e.jsx("img",{src:K(R.logo),alt:"Logo preview",className:"w-16 h-16 object-cover rounded border mt-2"}),e.jsx("div",{className:"font-bold",children:"Featured Image (optional)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:async t=>{const s=t.target.files&&t.target.files[0];if(!s)return;const a=new FormData;a.append("image",s);const U=await(await fetch(ee+"/products/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:a})).json();H(q=>({...q,featuredImage:U.imageUrl}))},className:"w-full border p-2 rounded"}),R.featuredImage&&e.jsx("img",{src:K(R.featuredImage),alt:"Featured preview",className:"w-24 h-16 object-cover rounded border mt-2"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"partner-active",type:"checkbox",checked:R.isActive,onChange:t=>H(s=>({...s,isActive:t.target.checked}))}),e.jsx("label",{htmlFor:"partner-active",className:"font-medium",children:"Active"})]}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Add Partner"})]}),E?e.jsx("p",{children:"Loading partners..."}):e.jsx("ul",{className:"space-y-2",children:x.map(t=>e.jsxs("li",{className:"flex justify-between items-start border p-2 rounded",children:[l===t._id?e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Se(t._id)},className:"flex flex-col gap-2 w-full",children:[e.jsx("input",{className:"border p-2 rounded",value:w.name,onChange:s=>_(a=>({...a,name:s.target.value})),required:!0}),e.jsx("input",{className:"border p-2 rounded",placeholder:"https://example.com",value:w.website,onChange:s=>_(a=>({...a,website:s.target.value})),required:!0}),e.jsx("input",{className:"border p-2 rounded",placeholder:"https://instagram.com/...",value:w.instagram||"",onChange:s=>_(a=>({...a,instagram:s.target.value}))}),e.jsx("textarea",{className:"border p-2 rounded",value:w.description,onChange:s=>_(a=>({...a,description:s.target.value}))}),e.jsxs("select",{className:"border p-2 rounded",value:w.category,onChange:s=>_(a=>({...a,category:s.target.value})),children:[e.jsx("option",{value:"education",children:"Education & Training"}),e.jsx("option",{value:"natural_products",children:"Natural Products"}),e.jsx("option",{value:"fashion",children:"Fashion"}),e.jsx("option",{value:"health_wellness",children:"Health & Wellness"}),e.jsx("option",{value:"beauty",children:"Beauty"}),e.jsx("option",{value:"sustainability",children:"Sustainability"}),e.jsx("option",{value:"other",children:"Other"})]}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Service A, Service B",value:w.services,onChange:s=>_(a=>({...a,services:s.target.value}))}),e.jsxs("select",{className:"border p-2 rounded",value:w.partnershipType,onChange:s=>_(a=>({...a,partnershipType:s.target.value})),children:[e.jsx("option",{value:"geschaeftspartner",children:"Geschäftspartner"}),e.jsx("option",{value:"synergin",children:"Synergin"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:`edit-active-${t._id}`,type:"checkbox",checked:!!w.isActive,onChange:s=>_(a=>({...a,isActive:s.target.checked}))}),e.jsx("label",{htmlFor:`edit-active-${t._id}`,className:"font-medium",children:"Active"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"bg-green-600 text-white px-3 py-1 rounded",children:"Save"}),e.jsx("button",{type:"button",className:"bg-gray-300 px-3 py-1 rounded",onClick:()=>P(null),children:"Cancel"})]})]}):e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold",children:t.name}),t.logo&&e.jsx("img",{src:K(t.logo),alt:"Logo",className:"w-10 h-10 object-cover rounded-full border my-1"}),e.jsx("div",{className:"text-sm text-gray-600 break-words",children:t.website}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t.category," • ",t.partnershipType," •"," ",t.isActive?"Active":"Inactive"]}),e.jsx("div",{className:"text-sm text-gray-700 mt-1",children:t.description})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsx("button",{onClick:()=>{P(t._id),_({name:t.name||"",description:t.description||"",website:t.website||"",instagram:t.instagram||"",category:t.category||"education",services:(t.services||[]).join(", "),partnershipType:t.partnershipType||"geschaeftspartner",isActive:t.isActive!==!1,logo:t.logo||"",featuredImage:t.featuredImage||""})},className:"text-blue-600 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>De(t._id),className:"text-red-600 hover:underline",children:"Delete"})]})]},t._id))}),S&&e.jsx("div",{className:"text-red-500 mt-2",children:S})]}),e.jsx("div",{className:"font-bold",children:"Commission Rate (e.g., 30 for 30%)"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Commission Rate (e.g., 30 for 30%)",type:"number",value:n.commissionRate,onChange:t=>c(s=>({...s,commissionRate:t.target.value})),required:!0}),e.jsx("div",{className:"font-bold",children:"Partner Name"}),e.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Partner Name",value:n.partnerName,onChange:t=>c(s=>({...s,partnerName:t.target.value})),required:!0}),e.jsx("div",{className:"font-bold",children:"Partner Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{const s=t.target.files[0];if(s){const a=new FormData;a.append("image",s),fetch(ee+"/products/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:a}).then(k=>k.json()).then(k=>{c(U=>({...U,partnerLogo:k.imageUrl}))}).catch(k=>{v("Error uploading partner logo")})}},className:"w-full border p-2 rounded"}),n.partnerLogo&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:K(n.partnerLogo),alt:"Partner Logo",className:"w-12 h-12 rounded-full object-cover border"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Logo uploaded successfully"}),e.jsx("button",{type:"button",onClick:()=>c(t=>({...t,partnerLogo:""})),className:"text-red-500 text-sm hover:underline",children:"Remove"})]}),e.jsx("div",{className:"font-bold",children:"Partner Description"}),e.jsx("textarea",{className:"w-full border p-2 rounded",placeholder:"Partner Description",value:n.partnerDescription,onChange:t=>c(s=>({...s,partnerDescription:t.target.value}))}),e.jsx("div",{className:"font-bold",children:"Category"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:n.category,onChange:t=>c(s=>({...s,category:t.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Electronics",children:"Electronics"}),e.jsx("option",{value:"Furniture",children:"Furniture"}),e.jsx("option",{value:"Clothing",children:"Clothing"}),e.jsx("option",{value:"Books",children:"Books"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,id:"commission-product-images",onChange:pe,className:"w-full border p-2 rounded"}),F>0&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded border",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["Selected Files (",F,"):"]}),e.jsx("div",{className:"space-y-1",children:(()=>{let t;return m==="commission"?t=document.getElementById("commission-product-images"):t=document.querySelector('input[type="file"]'),t&&t.files?Array.from(t.files).map((s,a)=>e.jsxs("div",{className:"text-sm text-gray-600",children:["📷 ",s.name," (",(s.size/1024/1024).toFixed(2)," MB)"]},a)):[]})()})]}),e.jsxs("button",{type:"button",onClick:fe,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",disabled:F===0,children:["Upload"," ",F>0?`${F} Images`:"Images"]}),W.length>0&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:W.map((t,s)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:K(t),alt:"Preview",width:60,loading:"lazy",decoding:"async"}),e.jsx("button",{type:"button",className:"absolute top-0 right-0 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",onClick:()=>p(a=>a.filter((k,U)=>U!==s)),children:"×"})]},s))}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Add Commission Product"})]}),B?e.jsx("p",{children:"Loading commission products..."}):e.jsx("ul",{className:"space-y-2",children:C.map(t=>e.jsx("li",{className:"flex justify-between items-center border p-2 rounded",children:D===t._id?e.jsxs("form",{onSubmit:async s=>{s.preventDefault();try{const a={name:i.name,price:parseFloat(i.price),originalPrice:i.originalPrice?parseFloat(i.originalPrice):void 0,isDiscounted:i.isDiscounted,discountLabel:i.discountLabel,description:i.description,zustand:i.zustand,width:i.width,depth:i.depth,height:i.height,brand:i.brand,model:i.model,color:i.color,material:i.material,pattern:i.pattern,image:i.images&&i.images[0]||t.image,images:i.images||[]};await z(`/commission/${t._id}`,{method:"PUT",body:JSON.stringify(a)}),j(null),ie()}catch{v("Error editing commission product")}},className:"flex flex-col gap-1 w-full",children:[e.jsx("input",{className:"border p-1 rounded",value:i.name,onChange:s=>h(a=>({...a,name:s.target.value})),required:!0}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Current Price (Lower Price)",type:"number",value:i.price,onChange:s=>{const a=s.target.value;h(k=>({...k,price:a,originalPrice:k.originalPrice&&parseFloat(a)<parseFloat(k.originalPrice)?k.originalPrice:k.price||k.originalPrice}))},required:!0}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Original Price (Higher Price)",type:"number",value:i.originalPrice,onChange:s=>h(a=>({...a,originalPrice:s.target.value}))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isDiscounted",checked:i.isDiscounted,onChange:s=>h(a=>({...a,isDiscounted:s.target.checked})),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"isDiscounted",className:"font-bold",children:"Mark as Discounted"})]}),i.isDiscounted&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 p-2 rounded border",children:["💡 ",e.jsx("strong",{children:"How to set discounted price:"}),e.jsx("br",{}),"1. Original Price: Keep the current/higher price (will be crossed out)",e.jsx("br",{}),"2. Current Price: Enter the new/lower price (what customer pays)",e.jsx("br",{}),"Example: Original: €15.99, Current: €12.99"]}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Discount Label (e.g., Last Chance)",value:i.discountLabel,onChange:s=>h(a=>({...a,discountLabel:s.target.value}))})]}),e.jsx("textarea",{className:"border p-1 rounded",value:i.description,onChange:s=>h(a=>({...a,description:s.target.value}))}),e.jsxs("select",{className:"border p-1 rounded",value:i.zustand,onChange:s=>h(a=>({...a,zustand:s.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Zustand"}),e.jsx("option",{value:"New",children:"New"}),e.jsx("option",{value:"Like New",children:"Like New"}),e.jsx("option",{value:"Very Good",children:"Very Good"}),e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Acceptable",children:"Acceptable"}),e.jsx("option",{value:"For Parts / Not Working",children:"For Parts / Not Working"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"border p-1 rounded w-1/3",placeholder:"Width",type:"number",value:i.width,onChange:s=>h(a=>({...a,width:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded w-1/3",placeholder:"Depth",type:"number",value:i.depth,onChange:s=>h(a=>({...a,depth:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded w-1/3",placeholder:"Height",type:"number",value:i.height,onChange:s=>h(a=>({...a,height:s.target.value}))})]}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Brand",value:i.brand,onChange:s=>h(a=>({...a,brand:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Model",value:i.model,onChange:s=>h(a=>({...a,model:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Color",value:i.color,onChange:s=>h(a=>({...a,color:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Material",value:i.material,onChange:s=>h(a=>({...a,material:s.target.value}))}),e.jsx("input",{className:"border p-1 rounded",placeholder:"Pattern",value:i.pattern,onChange:s=>h(a=>({...a,pattern:s.target.value}))}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async s=>{const a=Array.from(s.target.files);for(const k of a){const U=new FormData;U.append("image",k);const te=await(await fetch(ee+"/products/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:U})).json();h(se=>({...se,images:[...se.images||[],te.imageUrl]}))}}}),i.images&&i.images.length>0&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:i.images.map((s,a)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:K(s),alt:"Preview",width:60}),e.jsx("button",{type:"button",className:"absolute top-0 right-0 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",onClick:()=>h(k=>({...k,images:k.images.filter((U,q)=>q!==a)})),children:"×"})]},a))}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("button",{type:"submit",className:"bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Save"}),e.jsx("button",{type:"button",className:"bg-gray-300 px-2 py-1 rounded",onClick:()=>j(null),children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("b",{children:t.name})," -",t.isDiscounted&&t.originalPrice?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"line-through text-red-500",children:["€",t.originalPrice]}),e.jsxs("span",{className:"text-green-600 font-bold",children:["€",t.price]}),e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded text-xs",children:t.discountLabel})]}):e.jsxs("span",{children:["€",t.price]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Partner: ",t.partnerName]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Commission: ",t.commissionRate,"%"]}),t.partnerLogo&&e.jsx("img",{src:K(t.partnerLogo),alt:t.partnerName,width:60})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{j(t._id),h({name:t.name,price:t.price,originalPrice:t.originalPrice||t.price,isDiscounted:t.isDiscounted||!1,discountLabel:t.discountLabel||"Last Chance",description:t.description,zustand:t.zustand||"",width:t.width||"",depth:t.depth||"",height:t.height||"",brand:t.brand||"",model:t.model||"",color:t.color||"",material:t.material||"",pattern:t.pattern||"",images:t.images||[]})},className:"text-blue-600 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>ge(t._id),className:"text-red-600 hover:underline",children:"Delete"})]})]})},t._id))}),S&&e.jsx("div",{className:"text-red-500 mt-2",children:S})]})]})}const Lt=Object.freeze(Object.defineProperty({__proto__:null,default:Qe},Symbol.toStringTag,{value:"Module"})),X={offWhite:"#F2EBE9",brightPink:"#DE5499",darkTeal:"#264143"};function et({isOpen:r,onClose:y,data:C}){const[f,x]=u.useState("revenue"),[N,g]=u.useState("30"),[L,B]=u.useState("bar"),E=C&&Object.keys(C).length>0&&C.totalProducts>0?C:{totalUsers:12,totalOrders:8,totalProducts:15,totalRevenue:1247.85,monthlyRevenue:[{month:"Jan",revenue:0},{month:"Feb",revenue:0},{month:"Mar",revenue:0},{month:"Apr",revenue:0},{month:"May",revenue:0},{month:"Jun",revenue:1247.85}],orderStatuses:{Pending:3,Processing:2,Shipped:2,Delivered:1},topProducts:[{name:"Vintage Denim Jacket",sales:3,revenue:245.97},{name:"Retro Summer Dress",sales:2,revenue:165},{name:"Classic White Sneakers",sales:2,revenue:115.5},{name:"Leather Crossbody Bag",sales:1,revenue:89.99},{name:"Floral Blouse",sales:2,revenue:98.5}]};if(!r)return null;const I=()=>{const m=document.createElement("canvas"),o=m.getContext("2d");if(m.width=800,m.height=600,o.fillStyle=X.offWhite,o.fillRect(0,0,800,600),o.fillStyle=X.darkTeal,o.font="bold 32px Arial",o.fillText("Sales Report",50,50),o.font="18px Arial",o.fillText(`Generated on: ${new Date().toLocaleDateString()}`,50,80),o.font="bold 24px Arial",o.fillText(`${f.charAt(0).toUpperCase()+f.slice(1)} Report`,50,120),f==="revenue"){o.font="bold 28px Arial",o.fillStyle=X.brightPink,o.fillText(`Total Revenue: €${(E.totalRevenue||0).toFixed(2)}`,50,170),o.font="bold 20px Arial",o.fillStyle=X.darkTeal,o.fillText("Monthly Revenue:",50,220),o.font="16px Arial";let d=250;E.monthlyRevenue?.forEach((b,D)=>{o.fillText(`${b.month||"Unknown"}: €${(b.revenue||0).toFixed(2)}`,70,d),d+=25})}else if(f==="orders"){o.font="bold 28px Arial",o.fillStyle=X.brightPink,o.fillText(`Total Orders: ${E.totalOrders||0}`,50,170),o.font="bold 20px Arial",o.fillStyle=X.darkTeal,o.fillText("Order Statuses:",50,220),o.font="16px Arial";let d=250;Object.entries(E.orderStatuses||{}).forEach(([b,D])=>{o.fillText(`${b||"Unknown"}: ${D||0}`,70,d),d+=25})}else if(f==="products"){o.font="bold 28px Arial",o.fillStyle=X.brightPink,o.fillText(`Total Products: ${E.totalProducts||0}`,50,170),o.font="bold 20px Arial",o.fillStyle=X.darkTeal,o.fillText("Top Products:",50,220),o.font="16px Arial";let d=250;E.topProducts?.slice(0,5).forEach((b,D)=>{o.fillText(`${b.name||"Unknown"}: ${b.sales||0} sales, €${(b.revenue||0).toFixed(2)}`,70,d),d+=25})}return o.font="14px Arial",o.fillStyle=X.darkTeal,o.fillText("Generated by Admin Dashboard",50,550),m.toDataURL()},S=()=>{const m=I(),o=document.createElement("a");o.download=`report-${f}-${new Date().toISOString().split("T")[0]}.png`,o.href=m,o.click()},v=()=>{let m="data:text/csv;charset=utf-8,";f==="revenue"?(m+=`Month,Revenue
`,E.monthlyRevenue?.forEach(d=>{m+=`${d.month||"Unknown"},${d.revenue||0}
`})):f==="orders"?(m+=`Status,Count
`,Object.entries(E.orderStatuses||{}).forEach(([d,b])=>{m+=`${d||"Unknown"},${b||0}
`})):f==="products"&&(m+=`Product Name,Sales Count,Revenue
`,E.topProducts?.forEach(d=>{m+=`${d.name||"Unknown Product"},${d.sales||0},${d.revenue||0}
`}));const o=document.createElement("a");o.download=`report-${f}-${new Date().toISOString().split("T")[0]}.csv`,o.href=encodeURI(m),o.click()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 relative",children:[e.jsx("h2",{className:"text-2xl font-bold pr-12",style:{color:X.darkTeal},children:"Generate Reports"}),e.jsx("button",{onClick:y,className:"absolute top-6 right-6 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Close",children:e.jsx(Xe,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{id:"revenue",label:"Revenue Report",icon:e.jsx(ae,{})},{id:"orders",label:"Orders Report",icon:e.jsx(_e,{})},{id:"products",label:"Products Report",icon:e.jsx(qe,{})}].map(m=>e.jsxs("button",{onClick:()=>x(m.id),className:`p-4 rounded-lg border-2 transition-all duration-200 flex items-center space-x-3 ${f===m.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-blue-500",children:m.icon}),e.jsx("span",{className:"font-medium",children:m.label})]},m.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:N,onChange:m=>g(m.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"7",children:"Last 7 days"}),e.jsx("option",{value:"30",children:"Last 30 days"}),e.jsx("option",{value:"90",children:"Last 90 days"}),e.jsx("option",{value:"365",children:"Last year"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(He,{}),e.jsx("span",{children:"Custom range"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chart Type"}),e.jsx("div",{className:"flex space-x-4",children:[{id:"bar",label:"Bar Chart"},{id:"line",label:"Line Chart"},{id:"pie",label:"Pie Chart"}].map(m=>e.jsx("button",{onClick:()=>B(m.id),className:`px-4 py-2 rounded-lg border transition-colors ${L===m.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:m.label},m.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Report Preview"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 min-h-[300px]",children:[f==="revenue"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:["€",(E.totalRevenue||0).toFixed(2)]}),e.jsx("div",{className:"text-[#171717]",children:"Total Revenue"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:E.monthlyRevenue?.map((m,o)=>e.jsxs("div",{className:"bg-white p-3 rounded border text-center",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:m.month||"Unknown"}),e.jsxs("div",{className:"text-blue-600",children:["€",(m.revenue||0).toFixed(2)]})]},o))})]}),f==="orders"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:E.totalOrders||0}),e.jsx("div",{className:"text-[#171717]",children:"Total Orders"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(E.orderStatuses||{}).map(([m,o])=>e.jsxs("div",{className:"bg-white p-3 rounded border text-center",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:m||"Unknown"}),e.jsx("div",{className:"text-green-600",children:o||0})]},m))})]}),f==="products"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:E.totalProducts||0}),e.jsx("div",{className:"text-[#171717]",children:"Total Products"})]}),e.jsx("div",{className:"space-y-3",children:E.topProducts?.slice(0,5).map((m,o)=>e.jsxs("div",{className:"bg-white p-3 rounded border flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:m.name||"Unknown Product"}),e.jsxs("div",{className:"text-sm text-[#171717]",children:[m.sales||0," sales"]})]}),e.jsxs("div",{className:"text-purple-600 font-semibold",children:["€",(m.revenue||0).toFixed(2)]})]},o))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{onClick:S,className:"flex items-center space-x-2 px-6 py-3 rounded-lg text-white font-medium transition-colors hover:opacity-90",style:{backgroundColor:X.brightPink},children:[e.jsx(de,{size:16}),e.jsx("span",{children:"Download PNG"})]}),e.jsxs("button",{onClick:v,className:"flex items-center space-x-2 px-6 py-3 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:[e.jsx(de,{size:16}),e.jsx("span",{children:"Export CSV"})]})]}),e.jsx("button",{onClick:y,className:"px-1.5 py-1.5 rounded border border-gray-300 text-[#171717] font-medium hover:bg-gray-50 transition-colors text-xs",children:"Cancel"})]})]})]})})}const le=({title:r,value:y,icon:C,trend:f,color:x,bgColor:N})=>e.jsx("div",{className:`${N} p-6 rounded-xl shadow-lg border-l-4 ${x} transition-all duration-300 hover:shadow-xl hover:scale-105`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#171717] mb-1",children:r}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:y}),f&&e.jsxs("div",{className:`flex items-center mt-2 text-sm ${f>0?"text-green-600":"text-red-600"}`,children:[f>0?e.jsx(Ve,{size:12}):e.jsx(Be,{size:12}),e.jsxs("span",{className:"ml-1",children:[Math.abs(f),"%"]})]})]}),e.jsx("div",{className:`p-4 rounded-full ${x.replace("border-","bg-").replace("-500","-100")}`,children:C})]})}),tt=({monthlyRevenue:r,dateRange:y,setDateRange:C,colors:f})=>{const x=r.map(g=>({month:g.month,revenue:g.revenue,formattedRevenue:`€${g.revenue.toLocaleString()}`})),N=({active:g,payload:L,label:B})=>g&&L&&L.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:B}),e.jsx("p",{className:"text-pink-600 font-semibold",children:L[0].payload.formattedRevenue})]}):null;return e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Revenue Trend"}),e.jsxs("select",{value:y,onChange:g=>C(g.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"7",children:"Last 7 days"}),e.jsx("option",{value:"30",children:"Last 30 days"}),e.jsx("option",{value:"90",children:"Last 90 days"})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(ue,{width:"100%",height:"100%",children:e.jsxs(Ee,{data:x,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Ne,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(we,{dataKey:"month",tick:{fontSize:12,fill:"#6b7280"},axisLine:!1,tickLine:!1}),e.jsx(Ce,{tick:{fontSize:12,fill:"#6b7280"},axisLine:!1,tickLine:!1,tickFormatter:g=>`€${g.toLocaleString()}`}),e.jsx(me,{content:e.jsx(N,{})}),e.jsx(ze,{dataKey:"revenue",fill:f.brightPink,radius:[4,4,0,0],className:"hover:opacity-80 transition-opacity"})]})})})]})},st=({monthlyRevenue:r,colors:y})=>{const C=r.map(x=>({month:x.month,revenue:x.revenue,formattedRevenue:`€${x.revenue.toLocaleString()}`})),f=({active:x,payload:N,label:g})=>x&&N&&N.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:g}),e.jsx("p",{className:"text-pink-600 font-semibold",children:N[0].payload.formattedRevenue})]}):null;return e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Revenue Trend Over Time"}),e.jsx("div",{className:"h-64",children:e.jsx(ue,{width:"100%",height:"100%",children:e.jsxs(Fe,{data:C,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Ne,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(we,{dataKey:"month",tick:{fontSize:12,fill:"#6b7280"},axisLine:!1,tickLine:!1}),e.jsx(Ce,{tick:{fontSize:12,fill:"#6b7280"},axisLine:!1,tickLine:!1,tickFormatter:x=>`€${x.toLocaleString()}`}),e.jsx(me,{content:e.jsx(f,{})}),e.jsx(Ae,{type:"monotone",dataKey:"revenue",stroke:y.brightPink,fill:y.brightPink,fillOpacity:.3,strokeWidth:2})]})})})]})},rt=({orderStatuses:r,colors:y})=>{const C=Object.entries(r).map(([N,g],L)=>({name:N==="Paid"?"Paid":N,value:g,color:[y.brightPink,y.orange,y.darkTeal,y.lightPink][L%4]})),f=({active:N,payload:g})=>{if(N&&g&&g.length){const L=g[0],B=C.reduce((E,I)=>E+I.value,0),A=(L.value/B*100).toFixed(1);return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:L.name}),e.jsxs("p",{className:"text-sm text-[#171717]",children:[L.value," orders (",A,"%)"]})]})}return null},x=({payload:N})=>e.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:N.map((g,L)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:g.color}}),e.jsx("span",{className:"text-sm text-[#171717]",children:g.value})]},L))});return e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Order Status Distribution"}),e.jsx("div",{className:"h-64",children:e.jsx(ue,{width:"100%",height:"100%",children:e.jsxs(Oe,{children:[e.jsx(Ie,{data:C,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:2,dataKey:"value",children:C.map((N,g)=>e.jsx(Me,{fill:N.color},`cell-${g}`))}),e.jsx(me,{content:e.jsx(f,{})}),e.jsx(Re,{content:e.jsx(x,{})})]})})})]})},at=({topProducts:r,colors:y})=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Top Selling Products"}),e.jsx("div",{className:"space-y-4",children:r.map((C,f)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:y.brightPink},children:f+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:C.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["€",C.price]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[C.sales," sold"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["€",(C.sales*C.price).toFixed(2)]})]})]},C._id))})]}),Pe=({currentPage:r,totalPages:y,onPageChange:C,totalItems:f,itemsPerPage:x,showingText:N="Showing"})=>{if(y<=1)return null;const g=(r-1)*x+1,L=Math.min(r*x,f),B=()=>{const A=[];if(y<=5)for(let I=1;I<=y;I++)A.push(I);else{let I=Math.max(1,r-2),S=Math.min(y,I+5-1);S-I<4&&(I=Math.max(1,S-5+1));for(let v=I;v<=S;v++)A.push(v)}return A};return e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[N," ",g,"-",L," of ",f," items"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>C(r-1),disabled:r===1,className:"flex items-center space-x-1 px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(We,{size:12}),e.jsx("span",{children:"Previous"})]}),e.jsx("div",{className:"flex items-center space-x-1",children:B().map(A=>e.jsx("button",{onClick:()=>C(A),className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${r===A?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"}`,children:A},A))}),e.jsxs("button",{onClick:()=>C(r+1),disabled:r===y,className:"flex items-center space-x-1 px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx("span",{children:"Next"}),e.jsx(Ge,{size:12})]})]})]})})},nt=()=>{const[r,y]=u.useState([]),[C,f]=u.useState(!0),[x,N]=u.useState("all"),[g,L]=u.useState(1),[B,A]=u.useState(1),[E,I]=u.useState(0),[S]=u.useState(10);u.useEffect(()=>{v()},[g,x]);async function v(){f(!0);try{const D=await(await z(`/orders?page=${g}&limit=${S}&status=${x}`)).json();if(D.orders)y(D.orders),A(D.totalPages||1),I(D.totalOrders||0);else{const i=await(await z("/orders")).json(),h=x==="all"?i:i.filter(O=>O.status===x),n=(g-1)*S,c=n+S;y(h.slice(n,c)),A(Math.ceil(h.length/S)),I(h.length)}}catch(b){console.error("Error fetching orders:",b)}finally{f(!1)}}const m=async(b,D)=>{try{await z(`/orders/${b}`,{method:"PUT",body:JSON.stringify({status:D})}),v()}catch(j){console.error("Error updating order:",j)}},o=b=>{L(b)},d=b=>{N(b),L(1)};return C?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:"#DE5499"}})}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Order Management"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:x,onChange:b=>d(b.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm bg-white text-gray-900 shadow-sm",children:[e.jsx("option",{value:"all",children:"All Orders"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"canceled",children:"Cancelled"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-white text-sm font-medium transition-colors",style:{backgroundColor:"#DE5499"},children:[e.jsx(de,{size:14}),e.jsx("span",{children:"Export"})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",b._id.slice(-8)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.userId}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:["€",b.totalPrice]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:b.status,onChange:D=>m(b._id,D.target.value),className:"border border-gray-300 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 shadow-sm",children:[e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(b.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800 transition-colors",children:e.jsx(xe,{size:16})}),e.jsx("button",{className:"text-green-600 hover:text-green-800 transition-colors",children:e.jsx(he,{size:16})})]})})]},b._id))})]})}),e.jsx(Pe,{currentPage:g,totalPages:B,onPageChange:o,totalItems:E,itemsPerPage:S,showingText:"Showing"})]})},it=()=>{const[r,y]=u.useState([]),[C,f]=u.useState(!0),[x,N]=u.useState(""),[g,L]=u.useState(1),[B,A]=u.useState(1),[E,I]=u.useState(0),[S]=u.useState(10),[v,m]=u.useState(""),[o,d]=u.useState(null),[b,D]=u.useState(!1),[j,i]=u.useState(!1);u.useEffect(()=>{const p=setTimeout(()=>{m(x)},500);return()=>clearTimeout(p)},[x]),u.useEffect(()=>{h()},[g,v]);async function h(){f(!0);try{const F=await(await z(`/users?page=${g}&limit=${S}&search=${v}`)).json();if(F.users)y(F.users),A(F.totalPages||1),I(F.totalUsers||0);else{const R=await(await z("/users")).json(),H=v?R.filter(w=>w.username.toLowerCase().includes(v.toLowerCase())||w.email.toLowerCase().includes(v.toLowerCase())):R,l=(g-1)*S,P=l+S;y(H.slice(l,P)),A(Math.ceil(H.length/S)),I(H.length)}}catch(p){console.error("Error fetching users:",p)}finally{f(!1)}}const n=p=>L(p),c=()=>{const p=`data:text/csv;charset=utf-8,Username,Email
`+r.map(R=>`${R.username},${R.email}`).join(`
`),F=encodeURI(p),V=document.createElement("a");V.setAttribute("href",F),V.setAttribute("download","users.csv"),document.body.appendChild(V),V.click(),document.body.removeChild(V)},O=async(p,F)=>{try{(await z(`/users/${p}/role`,{method:"PUT",body:JSON.stringify({role:F})})).ok?(h(),alert(`User role changed to ${F} successfully!`)):alert("Failed to change user role")}catch(V){console.error("Error changing user role:",V),alert("Error changing user role")}},G=p=>{d(p),D(!0)},Y=p=>{d(p),i(!0)},M=async p=>{if(confirm("Are you sure you want to delete this user?"))try{if(!(await z(`/users/${p}`,{method:"DELETE"})).ok)throw new Error("Failed to delete user");h(),alert("User deleted successfully!")}catch(F){console.error("Error deleting user:",F),alert("Failed to delete user")}},W=async p=>{p.preventDefault();try{if(!(await z(`/users/${o._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Failed to update user");i(!1),h(),alert("User updated successfully!")}catch(F){console.error("Error updating user:",F),alert("Failed to update user")}};return C?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:"#DE5499"}})}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"User Management"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsx("input",{type:"text",placeholder:"Search users...",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 w-full sm:w-64 bg-white text-gray-900 placeholder-gray-500 shadow-sm",value:x,onChange:p=>N(p.target.value),style:{backgroundColor:"#ffffff",color:"#111827",WebkitTextFillColor:"#111827",caretColor:"#111827"}}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:"Export Users"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.username}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.email}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[p.first_name," ",p.last_name]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("select",{value:p.role||"user",onChange:F=>O(p._id,F.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm bg-white text-gray-900 shadow-sm",style:{backgroundColor:"#ffffff",color:"#111827",WebkitTextFillColor:"#111827",caretColor:"#111827"},children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>G(p),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"View User",children:e.jsx(xe,{size:16})}),e.jsx("button",{onClick:()=>Y(p),className:"text-green-600 hover:text-green-800 transition-colors",title:"Edit User",children:e.jsx(he,{size:16})}),e.jsx("button",{onClick:()=>M(p._id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete User",children:e.jsx(ke,{size:16})})]})})]},p._id))})]})}),e.jsx(Pe,{currentPage:g,totalPages:B,onPageChange:n,totalItems:E,itemsPerPage:S,showingText:"Showing"}),b&&o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"User Details"}),e.jsx("button",{onClick:()=>D(!1),className:"text-gray-500 hover:text-gray-700",children:"×"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Username:"}),e.jsx("p",{className:"text-gray-900",children:o.username})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Email:"}),e.jsx("p",{className:"text-gray-900",children:o.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Name:"}),e.jsxs("p",{className:"text-gray-900",children:[o.first_name," ",o.last_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Phone:"}),e.jsx("p",{className:"text-gray-900",children:o.phone||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Address:"}),e.jsx("p",{className:"text-gray-900",children:o.address||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Role:"}),e.jsx("p",{className:"text-gray-900 capitalize",children:o.role||"user"})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>D(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})})]})}),j&&o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Edit User"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700",children:"×"})]}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Username:"}),e.jsx("input",{type:"text",value:o.username,onChange:p=>d({...o,username:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-500",style:{backgroundColor:"#ffffff",color:"#111827",WebkitTextFillColor:"#111827",caretColor:"#111827"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Email:"}),e.jsx("input",{type:"email",value:o.email,onChange:p=>d({...o,email:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-500",style:{backgroundColor:"#ffffff",color:"#111827",WebkitTextFillColor:"#111827",caretColor:"#111827"}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"First Name:"}),e.jsx("input",{type:"text",value:o.first_name||"",onChange:p=>d({...o,first_name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-500",style:{backgroundColor:"#ffffff",color:"#111827",WebkitTextFillColor:"#111827",caretColor:"#111827"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Last Name:"}),e.jsx("input",{type:"text",value:o.last_name||"",onChange:p=>d({...o,last_name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-500",style:{backgroundColor:"#ffffff",color:"#111827",WebkitTextFillColor:"#111827",caretColor:"#111827"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Phone:"}),e.jsx("input",{type:"tel",value:o.phone||"",onChange:p=>d({...o,phone:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-500",style:{backgroundColor:"#ffffff",color:"#111827",WebkitTextFillColor:"#111827",caretColor:"#111827"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Address:"}),e.jsx("textarea",{value:o.address||"",onChange:p=>d({...o,address:p.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-500",style:{backgroundColor:"#ffffff",color:"#111827",WebkitTextFillColor:"#111827",caretColor:"#111827"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Role:"}),e.jsxs("select",{value:o.role||"user",onChange:p=>d({...o,role:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-500 bg-white text-gray-900 shadow-sm",style:{backgroundColor:"#ffffff",color:"#111827",WebkitTextFillColor:"#111827",caretColor:"#111827"},children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-pink-500 text-white px-4 py-2 rounded hover:bg-pink-600",children:"Save Changes"})]})]})]})})]})},lt=()=>{const[r,y]=u.useState([]),[C,f]=u.useState([]),[x,N]=u.useState(!0),[g,L]=u.useState(!1),[B,A]=u.useState(!1),[E,I]=u.useState(null),[S,v]=u.useState({productId:"",displayOrder:1,customTitle:"",customDescription:""}),m={brightPink:"#de5499",darkTeal:"#00897b",lightPink:"#f9a8d4"};u.useEffect(()=>{o(),d()},[]);const o=async()=>{try{const n=await z("/featured-products/admin");if(n.ok){const c=await n.json();y(c)}}catch(n){console.error("Error fetching featured products:",n)}finally{N(!1)}},d=async()=>{try{const n=await z("/featured-products/available-products");if(n.ok){const c=await n.json();f(c)}}catch(n){console.error("Error fetching available products:",n)}},b=async n=>{n.preventDefault();try{const c=await z("/featured-products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(c.ok)await o(),await d(),L(!1),v({productId:"",displayOrder:1,customTitle:"",customDescription:""});else{const O=await c.json();alert(O.error||"Error adding featured product")}}catch(c){console.error("Error adding featured product:",c),alert("Error adding featured product")}},D=async n=>{n.preventDefault();try{const c=await z(`/featured-products/${E._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(c.ok)await o(),A(!1),I(null),v({productId:"",displayOrder:1,customTitle:"",customDescription:""});else{const O=await c.json();alert(O.error||"Error updating featured product")}}catch(c){console.error("Error updating featured product:",c),alert("Error updating featured product")}},j=async n=>{if(window.confirm("Are you sure you want to remove this product from featured list?"))try{const c=await z(`/featured-products/${n}`,{method:"DELETE"});if(c.ok)await o(),await d();else{const O=await c.json();alert(O.error||"Error removing featured product")}}catch(c){console.error("Error removing featured product:",c),alert("Error removing featured product")}},i=async n=>{try{const c=await z(`/featured-products/${n._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!n.isActive})});if(c.ok)await o();else{const O=await c.json();alert(O.error||"Error updating featured product")}}catch(c){console.error("Error updating featured product:",c),alert("Error updating featured product")}},h=n=>{I(n),v({productId:n.productId._id,displayOrder:n.displayOrder,customTitle:n.customTitle||"",customDescription:n.customDescription||""}),A(!0)};return x?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:m.brightPink}})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Featured Products Management"}),e.jsxs("button",{onClick:()=>L(!0),className:"inline-flex items-center space-x-2 px-4 py-2 rounded-lg text-white font-medium transition-colors hover:opacity-90",style:{backgroundColor:m.brightPink},children:[e.jsx(Ze,{size:16}),e.jsx("span",{children:"Add Featured Product"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(n=>{const c=r.find(O=>O.displayOrder===n);return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b",style:{backgroundColor:m.lightPink},children:e.jsxs("h3",{className:"font-semibold text-gray-900",children:["Position ",n]})}),c?e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"aspect-square mb-4 rounded-lg overflow-hidden",children:e.jsx("img",{src:K(c.productId.images?.[0]||c.productId.image),alt:c.productId.name,className:"w-full h-full object-cover"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2 truncate",children:c.customTitle||c.productId.name}),e.jsxs("p",{className:"text-sm text-[#171717] mb-2",children:["€",c.productId.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.isActive?"Active":"Inactive"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>i(c),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:c.isActive?"Deactivate":"Activate",children:c.isActive?e.jsx(Ye,{size:16}):e.jsx(xe,{size:16})}),e.jsx("button",{onClick:()=>h(c),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Edit",children:e.jsx(he,{size:16})}),e.jsx("button",{onClick:()=>j(c._id),className:"p-2 rounded-lg hover:bg-red-100 text-red-600 transition-colors",title:"Remove",children:e.jsx(ke,{size:16})})]})]})]}):e.jsxs("div",{className:"p-4 text-center text-[#171717]",children:[e.jsx("p",{className:"mb-4",children:"No product assigned"}),e.jsx("button",{onClick:()=>{v(O=>({...O,displayOrder:n})),L(!0)},className:"text-sm px-3 py-1 rounded-lg text-white",style:{backgroundColor:m.darkTeal},children:"Assign Product"})]})]},n)})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Featured Product"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product"}),e.jsxs("select",{value:S.productId,onChange:n=>v(c=>({...c,productId:n.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-500",required:!0,children:[e.jsx("option",{value:"",children:"Select a product"}),C.map(n=>e.jsxs("option",{value:n._id,children:[n.name," - €",n.price.toFixed(2)]},n._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),e.jsx("select",{value:S.displayOrder,onChange:n=>v(c=>({...c,displayOrder:parseInt(n.target.value)})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-500",required:!0,children:[1,2,3,4].map(n=>e.jsxs("option",{value:n,children:["Position ",n]},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Title (Optional)"}),e.jsx("input",{type:"text",value:S.customTitle,onChange:n=>v(c=>({...c,customTitle:n.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Override product name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Description (Optional)"}),e.jsx("textarea",{value:S.customDescription,onChange:n=>v(c=>({...c,customDescription:n.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-500",rows:"3",placeholder:"Override product description"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:m.brightPink},children:"Add Product"}),e.jsx("button",{type:"button",onClick:()=>L(!1),className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"})]})]})]})}),B&&E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Featured Product"}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),e.jsx("select",{value:S.displayOrder,onChange:n=>v(c=>({...c,displayOrder:parseInt(n.target.value)})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-500",required:!0,children:[1,2,3,4].map(n=>e.jsxs("option",{value:n,children:["Position ",n]},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Title (Optional)"}),e.jsx("input",{type:"text",value:S.customTitle,onChange:n=>v(c=>({...c,customTitle:n.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Override product name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Description (Optional)"}),e.jsx("textarea",{value:S.customDescription,onChange:n=>v(c=>({...c,customDescription:n.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-500",rows:"3",placeholder:"Override product description"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:m.brightPink},children:"Update Product"}),e.jsx("button",{type:"button",onClick:()=>A(!1),className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"})]})]})]})})]})};function ot(){const[r,y]=u.useState([]),[C,f]=u.useState(!0),[x,N]=u.useState(null),[g,L]=u.useState(!1),[B,A]=u.useState([]),[E,I]=u.useState([]),[S,v]=u.useState(""),[m,o]=u.useState("all"),[d,b]=u.useState("all"),[D,j]=u.useState({name:"",description:"",website:"",instagram:"",category:"other",services:[],partnershipType:"geschaeftspartner",contactInfo:{email:"",phone:"",address:""},specialOffers:"",discountCode:"",tags:[],displayOrder:0,isActive:!0});u.useEffect(()=>{i(),h(),n()},[S,m,d]);const i=async()=>{try{f(!0);const l=new URLSearchParams;m!=="all"&&l.append("category",m),d!=="all"&&l.append("partnershipType",d),S&&l.append("search",S);const P=await z(`/partners/admin?${l.toString()}`);if(P.ok){const w=await P.json();y(w)}}catch(l){console.error("Error fetching partners:",l)}finally{f(!1)}},h=async()=>{try{const l=await z("/partners/categories/list");if(l.ok){const P=await l.json();A(P)}}catch(l){console.error("Error fetching categories:",l)}},n=async()=>{try{const l=await z("/partners/types/list");if(l.ok){const P=await l.json();I(P)}}catch(l){console.error("Error fetching types:",l)}},c=async l=>{l.preventDefault();try{const P=x?`/partners/${x._id}`:"/partners",_=await z(P,{method:x?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(_.ok){const Z=await _.json();y(x?r.map(J=>J._id===x._id?Z:J):[...r,Z]),Y(),alert(x?"Partner updated successfully!":"Partner added successfully!")}else{const Z=await _.json();alert(`Error: ${Z.error}`)}}catch(P){console.error("Error saving partner:",P),alert("Error saving partner")}},O=l=>{N(l),j({name:l.name||"",description:l.description||"",website:l.website||"",instagram:l.instagram||"",category:l.category||"other",services:l.services||[],partnershipType:l.partnershipType||"geschaeftspartner",contactInfo:{email:l.contactInfo?.email||"",phone:l.contactInfo?.phone||"",address:l.contactInfo?.address||""},specialOffers:l.specialOffers||"",discountCode:l.discountCode||"",tags:l.tags||[],displayOrder:l.displayOrder||0,isActive:l.isActive!==!1}),L(!0)},G=async l=>{if(window.confirm("Are you sure you want to delete this partner?"))try{const P=await z(`/partners/${l}`,{method:"DELETE"});if(P.ok)y(r.filter(w=>w._id!==l)),alert("Partner deleted successfully!");else{const w=await P.json();alert(`Error: ${w.error}`)}}catch(P){console.error("Error deleting partner:",P),alert("Error deleting partner")}},Y=()=>{j({name:"",description:"",website:"",instagram:"",category:"other",services:[],partnershipType:"geschaeftspartner",contactInfo:{email:"",phone:"",address:""},specialOffers:"",discountCode:"",tags:[],displayOrder:0,isActive:!0}),N(null),L(!1)},M=l=>{const{name:P,value:w,type:_,checked:Z}=l.target;if(P.startsWith("contactInfo.")){const J=P.split(".")[1];j(ne=>({...ne,contactInfo:{...ne.contactInfo,[J]:w}}))}else j(_==="checkbox"?J=>({...J,[P]:Z}):J=>({...J,[P]:w}))},W=l=>{const P=l.target.value.split(",").map(w=>w.trim()).filter(w=>w);j(w=>({...w,services:P}))},p=l=>{const P=l.target.value.split(",").map(w=>w.trim()).filter(w=>w);j(w=>({...w,tags:P}))},F=l=>{const P=B.find(w=>w.value===l);return P?P.icon:"🔗"},V=l=>{const P=B.find(w=>w.value===l);return P?P.label:l},R=l=>{const P=E.find(w=>w.value===l);return P?P.icon:"🤝"},H=l=>{const P=E.find(w=>w.value===l);return P?P.label:l};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Partners Management"}),e.jsx("button",{onClick:()=>L(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add New Partner"})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search partners...",value:S,onChange:l=>v(l.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:m,onChange:l=>o(l.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),B.map(l=>e.jsxs("option",{value:l.value,children:[l.icon," ",l.label]},l.value))]}),e.jsxs("select",{value:d,onChange:l=>b(l.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),E.map(l=>e.jsxs("option",{value:l.value,children:[l.icon," ",l.label]},l.value))]}),e.jsx("button",{onClick:i,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Apply Filters"})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:x?"Edit Partner":"Add New Partner"}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:D.name,onChange:M,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website *"}),e.jsx("input",{type:"url",name:"website",value:D.website,onChange:M,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("textarea",{name:"description",value:D.description,onChange:M,required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instagram"}),e.jsx("input",{type:"url",name:"instagram",value:D.instagram,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsx("select",{name:"category",value:D.category,onChange:M,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:B.map(l=>e.jsxs("option",{value:l.value,children:[l.icon," ",l.label]},l.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Partnership Type *"}),e.jsx("select",{name:"partnershipType",value:D.partnershipType,onChange:M,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:E.map(l=>e.jsxs("option",{value:l.value,children:[l.icon," ",l.label]},l.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),e.jsx("input",{type:"number",name:"displayOrder",value:D.displayOrder,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Services (comma separated)"}),e.jsx("input",{type:"text",value:D.services.join(", "),onChange:W,placeholder:"Service 1, Service 2, Service 3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma separated)"}),e.jsx("input",{type:"text",value:D.tags.join(", "),onChange:p,placeholder:"Tag 1, Tag 2, Tag 3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"contactInfo.email",value:D.contactInfo.email,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"text",name:"contactInfo.phone",value:D.contactInfo.phone,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("input",{type:"text",name:"contactInfo.address",value:D.contactInfo.address,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Offers"}),e.jsx("input",{type:"text",name:"specialOffers",value:D.specialOffers,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Code"}),e.jsx("input",{type:"text",name:"discountCode",value:D.discountCode,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:D.isActive,onChange:M,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:Y,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[x?"Update":"Add"," Partner"]})]})]})]})}),C?e.jsx("div",{className:"flex justify-center",children:e.jsx(Ke,{})}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#171717] uppercase tracking-wider",children:"Partner"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#171717] uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#171717] uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#171717] uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#171717] uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(l=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:l.name}),e.jsx("div",{className:"text-sm text-[#171717] truncate max-w-xs",children:l.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[F(l.category)," ",V(l.category)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[R(l.partnershipType)," ",H(l.partnershipType)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${l.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:l.isActive?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>O(l),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>G(l._id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},l._id))})]})})})]})}const $={lightPink:"#EDDCD9",offWhite:"#F2EBE9",brightPink:"#DE5499",darkTeal:"#264143",orange:"#E9944C"};function ct(){const[r,y]=u.useState({totalUsers:0,totalOrders:0,totalProducts:0,totalRevenue:0,recentOrders:[],recentUsers:[],monthlyRevenue:[],topProducts:[],orderStatuses:{}}),[C,f]=u.useState(!0),[x,N]=u.useState("dashboard"),[g,L]=u.useState("30"),[B,A]=u.useState(!1),[E,I]=u.useState(null);u.useEffect(()=>{S()},[g]);async function S(){f(!0);try{const j=localStorage.getItem("token");if(!j){console.log("No token found, redirecting to login"),window.location.href="/login";return}try{const h=JSON.parse(atob(j.split(".")[1])).role;if(h!=="admin"){console.log("User is not admin, redirecting to home"),window.location.href="/";return}I(h),v()}catch(i){console.error("Error decoding token:",i),localStorage.removeItem("token"),window.location.href="/login";return}}catch(j){console.error("Error checking user role:",j),localStorage.removeItem("token"),window.location.href="/login"}finally{f(!1)}}async function v(){f(!0);try{if(!localStorage.getItem("token")){console.log("No token found, redirecting to login"),window.location.href="/login";return}const[i,h,n]=await Promise.all([z("/users"),z("/orders"),z("/products")]);if(!i.ok||!h.ok||!n.ok){if(i.status===401||h.status===401||n.status===401){console.log("Unauthorized, redirecting to login"),localStorage.removeItem("token"),window.location.href="/login";return}throw console.log("Response status:",i.status,h.status,n.status),new Error("Failed to fetch data")}const c=await i.json(),O=await h.json(),G=await n.json(),Y=O.reduce((F,V)=>F+(V.totalPrice||0),0),M=m(O),W=o(O),p=d(O,G);y({totalUsers:c.length,totalOrders:O.length,totalProducts:G.length,totalRevenue:Y,recentOrders:O.slice(-5).reverse(),recentUsers:c.slice(-5).reverse(),monthlyRevenue:M,orderStatuses:W,topProducts:p})}catch(j){if(console.error("Error fetching dashboard data:",j),j.message.includes("Unexpected token '<'")){console.log("Received HTML response, redirecting to login"),localStorage.removeItem("token"),window.location.href="/login";return}}finally{f(!1)}}const m=j=>{const i=[];for(let h=5;h>=0;h--){const n=new Date;n.setMonth(n.getMonth()-h);const c=n.toLocaleDateString("en-US",{month:"short"}),G=j.filter(Y=>{const M=new Date(Y.createdAt);return M.getMonth()===n.getMonth()&&M.getFullYear()===n.getFullYear()}).reduce((Y,M)=>Y+(M.totalPrice||0),0);i.push({month:c,revenue:G})}return i},o=j=>{const i={};return j.forEach(h=>{const n=h.status||"Unknown";i[n]=(i[n]||0)+1}),i},d=(j,i)=>{const h={};return j.forEach(n=>{n.items?.forEach(c=>{const O=c.productId;h[O]=(h[O]||0)+(c.quantity||1)})}),i.map(n=>({...n,sales:h[n._id]||0})).sort((n,c)=>c.sales-n.sales).slice(0,5)},b=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(le,{title:"Total Users",value:r.totalUsers,icon:e.jsx(ye,{className:"text-white",size:24}),color:"border-blue-500",bgColor:"bg-white",trend:12}),e.jsx(le,{title:"Total Orders",value:r.totalOrders,icon:e.jsx(ce,{className:"text-white",size:24}),color:"border-green-500",bgColor:"bg-white",trend:8}),e.jsx(le,{title:"Total Products",value:r.totalProducts,icon:e.jsx(Q,{className:"text-white",size:24}),color:"border-purple-500",bgColor:"bg-white",trend:-3}),e.jsx(le,{title:"Total Revenue",value:`€${r.totalRevenue.toFixed(2)}`,icon:e.jsx(Je,{className:"text-white",size:24}),color:"border-yellow-500",bgColor:"bg-white",trend:15})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(tt,{monthlyRevenue:r.monthlyRevenue,dateRange:g,setDateRange:L,colors:$}),e.jsx(rt,{orderStatuses:r.orderStatuses,colors:$})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(st,{monthlyRevenue:r.monthlyRevenue,colors:$})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(at,{topProducts:r.topProducts,colors:$}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Recent Activity"}),e.jsx("div",{className:"space-y-4",children:r.recentOrders.slice(0,5).map(j=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:$.lightPink},children:e.jsx(ce,{size:14,style:{color:$.darkTeal}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["New order #",j._id.slice(-6)]}),e.jsxs("p",{className:"text-xs text-[#171717]",children:["€",j.totalPrice," •"," ",new Date(j.createdAt).toLocaleDateString()]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${j.status==="Paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:j.status==="Paid"?"Paid":j.status})]},j._id))})]})]})]});return C?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:$.brightPink}})})}):localStorage.getItem("token")?e.jsxs("div",{className:"max-w-7xl mx-auto p-6",style:{backgroundColor:$.offWhite},children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",style:{color:$.darkTeal},children:"Admin Dashboard"}),e.jsx("p",{className:"text-[#171717] mt-2",children:"Complete store management and analytics"})]}),e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center space-x-2 px-6 py-3 rounded-lg text-white font-medium transition-colors hover:opacity-90",style:{backgroundColor:$.orange},children:[e.jsx(je,{size:16}),e.jsx("span",{children:"Generate Reports"})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("nav",{className:"flex space-x-2 md:space-x-8 overflow-x-auto",children:[{id:"dashboard",label:"Dashboard",icon:e.jsx(ae,{})},{id:"orders",label:"Orders",icon:e.jsx(ce,{})},{id:"users",label:"Users",icon:e.jsx(ye,{})},{id:"products",label:"Products",icon:e.jsx(Q,{})},{id:"featured",label:"Featured Products",icon:e.jsx(Q,{})},{id:"partners",label:"Partners",icon:e.jsx(je,{})}].map(j=>e.jsxs("button",{onClick:()=>N(j.id),className:`flex items-center space-x-1 md:space-x-2 py-3 px-2 md:px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${x===j.id?"border-b-2 font-semibold":"border-transparent text-[#171717] hover:text-gray-700 hover:border-gray-300"}`,style:x===j.id?{borderColor:$.brightPink,color:$.brightPink}:{},children:[j.icon,e.jsx("span",{className:"text-xs md:text-sm",children:j.label})]},j.id))})}),x==="dashboard"&&e.jsx(b,{}),x==="orders"&&e.jsx(nt,{}),x==="users"&&e.jsx(it,{}),x==="featured"&&e.jsx(lt,{}),x==="partners"&&e.jsx(ot,{}),x==="products"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:$.lightPink},children:e.jsx(Q,{size:24,style:{color:$.darkTeal}})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Add New Product"}),e.jsx("p",{className:"text-[#171717] text-sm mb-4",children:"Create and add new products to your store"}),e.jsxs("a",{href:"/admin",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-lg text-white font-medium transition-colors hover:opacity-90",style:{backgroundColor:$.brightPink},children:[e.jsx(Q,{size:16}),e.jsx("span",{children:"Add Product"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:$.lightPink},children:e.jsx(Q,{size:24,style:{color:$.darkTeal}})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Manage Products"}),e.jsx("p",{className:"text-[#171717] text-sm mb-4",children:"Edit, delete and manage existing products"}),e.jsxs("a",{href:"/admin",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-lg text-white font-medium transition-colors hover:opacity-90",style:{backgroundColor:$.orange},children:[e.jsx(Q,{size:16}),e.jsx("span",{children:"Manage"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:$.lightPink},children:e.jsx(ae,{size:24,style:{color:$.darkTeal}})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Product Analytics"}),e.jsx("p",{className:"text-[#171717] text-sm mb-4",children:"View detailed analytics and insights"}),e.jsxs("button",{onClick:()=>N("dashboard"),className:"inline-flex items-center space-x-2 px-4 py-2 rounded-lg text-white font-medium transition-colors hover:opacity-90",style:{backgroundColor:$.darkTeal},children:[e.jsx(ae,{size:16}),e.jsx("span",{children:"View Analytics"})]})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>window.open("/admin","_blank"),className:"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-pink-400 hover:bg-pink-50 transition-all duration-300",children:[e.jsx(Q,{size:20,style:{color:$.brightPink}}),e.jsx("span",{className:"font-medium text-gray-700",children:"Open Product Manager"})]}),e.jsxs("button",{onClick:()=>N("dashboard"),className:"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-pink-400 hover:bg-pink-50 transition-all duration-300",children:[e.jsx(ae,{size:20,style:{color:$.brightPink}}),e.jsx("span",{className:"font-medium text-gray-700",children:"View Dashboard"})]})]})]})]}),e.jsx(et,{isOpen:B,onClose:()=>A(!1),data:r})]}):e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Authentication Required"}),e.jsx("p",{className:"text-[#171717] mb-6",children:"Please log in to access the admin dashboard."}),e.jsx("a",{href:"/login",className:"inline-flex items-center space-x-2 px-6 py-3 rounded-lg text-white font-medium transition-colors hover:opacity-90",style:{backgroundColor:$.brightPink},children:"Go to Login"})]})})}const Tt=Object.freeze(Object.defineProperty({__proto__:null,default:ct},Symbol.toStringTag,{value:"Module"}));export{Lt as A,ee as B,jt as F,Ke as L,z as a,ht as b,ft as c,pt as d,bt as e,vt as f,K as g,St as h,Pt as i,e as j,gt as k,xt as l,wt as m,Xe as n,Dt as o,Ct as p,kt as q,ce as r,He as s,Je as t,Nt as u,yt as v,Tt as w};
