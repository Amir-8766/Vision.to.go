import{B as b,j as e,g as p}from"./admin-CjE1p_fZ.js";import{r as a,u as k}from"./router-DqluUKdp.js";import{m as P}from"./shop-NOs0Rz2B.js";import"./icons-CDVIwAiG.js";import"./charts-hD1MI6At.js";import"./vendor-Tt9FPAzf.js";import"./slick-JyPX3RhO.js";import"./stripe-DnwkPVAo.js";import"./auth-Tf0T-Vub.js";function I(){const[r,h]=a.useState([]),[f,j]=a.useState(!0),[s,v]=a.useState("all"),[o,i]=a.useState(!1),c=a.useRef(null);k(),a.useEffect(()=>{N()},[]),a.useEffect(()=>{const t=n=>{c.current&&!c.current.contains(n.target)&&i(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const N=async()=>{try{const n=await(await fetch(`${b}/commission`)).json();h(n)}catch(t){console.error("Error fetching commission products:",t)}finally{j(!1)}},m=[...new Set(r.map(t=>t.partnerName))],d=s==="all"?r:r.filter(t=>t.partnerName===s),x=t=>{v(t),i(!1)},w=()=>{if(s==="all")return{name:"Alle Partner",count:r.length,logo:null};const t=r.filter(n=>n.partnerName===s);return{name:s,count:t.length,logo:t[0]?.partnerLogo}};if(f)return e.jsx("div",{className:"text-center py-8",children:"Loading..."});const l=w();return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Kommissions-Neuware"}),e.jsx("p",{className:"text-lg text-[#171717]",children:"Entdecken Sie neue Produkte unserer Partner mit attraktiven Kommissionspreisen"})]}),e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsxs("div",{className:"relative",ref:c,children:[e.jsxs("button",{onClick:()=>i(!o),className:"flex items-center gap-3 bg-white border border-gray-300 rounded-lg px-4 py-3 shadow-sm hover:shadow-md transition-shadow duration-200 min-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[l.logo?e.jsx("img",{src:p(l.logo),alt:l.name,className:"w-6 h-6 rounded-full object-cover"}):e.jsx("span",{className:"text-lg",children:s==="all"?"üè™":"üè¢"}),e.jsx("span",{className:"font-medium text-gray-900",children:l.name})]}),e.jsx("span",{className:"bg-gray-100 text-[#171717] px-2 py-1 rounded-full text-sm font-medium",children:l.count}),e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform duration-200 ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto",children:[e.jsxs("button",{onClick:()=>x("all"),className:`w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 transition-colors duration-150 ${s==="all"?"bg-pink-50 text-pink-600":"text-gray-900"}`,children:[e.jsx("span",{className:"text-lg",children:"üè™"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Alle Partner"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[r.length," Produkte"]})]}),s==="all"&&e.jsx("svg",{className:"w-4 h-4 text-pink-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),e.jsx("div",{className:"border-t border-gray-100"}),m.map(t=>{const n=r.filter(y=>y.partnerName===t),u=n[0]?.partnerLogo,g=s===t;return e.jsxs("button",{onClick:()=>x(t),className:`w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 transition-colors duration-150 ${g?"bg-pink-50 text-pink-600":"text-gray-900"}`,children:[u?e.jsx("img",{src:p(u),alt:t,className:"w-6 h-6 rounded-full object-cover"}):e.jsx("span",{className:"text-lg",children:"üè¢"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t}),e.jsxs("div",{className:"text-sm text-gray-500",children:[n.length," Produkte"]})]}),g&&e.jsx("svg",{className:"w-4 h-4 text-pink-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},t)})]})]})}),e.jsx("div",{className:"mb-6 text-center",children:e.jsx("p",{className:"text-sm text-[#171717]",children:s==="all"?`Zeige alle ${r.length} Produkte von ${m.length} Partnern`:`Zeige ${d.length} Produkte von ${s}`})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map(t=>e.jsx(P,{product:t},t._id))}),d.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Keine Produkte gefunden"}),e.jsx("p",{className:"text-gray-500",children:s==="all"?"Es sind derzeit keine Kommissionsprodukte verf√ºgbar.":`Keine Produkte f√ºr ${s} gefunden.`})]})]})}export{I as default};
