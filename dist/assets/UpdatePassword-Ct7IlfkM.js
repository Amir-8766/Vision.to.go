import{j as e,a as g}from"./admin-CjE1p_fZ.js";import{r as t,u as j}from"./router-DqluUKdp.js";import"./icons-CDVIwAiG.js";import"./charts-hD1MI6At.js";import"./vendor-Tt9FPAzf.js";function y(){const[a,c]=t.useState(""),[i,m]=t.useState(""),[d,o]=t.useState(""),[h,w]=t.useState(!1),[n,l]=t.useState(!1),p=j(),x=()=>new URLSearchParams(window.location.search).get("token"),b=async s=>{if(s.preventDefault(),o(""),a!==i){o("Passwörter stimmen nicht überein");return}l(!0);try{const r=x();if(!r)throw new Error("Kein Token gefunden. Bitte öffnen Sie den Link aus Ihrer E-Mail.");const u=await g("/auth/update-password",{method:"POST",body:JSON.stringify({token:r,password:a})});if(!u.ok){const f=await u.json();throw new Error(f.error||"Fehler beim Aktualisieren des Passworts")}w(!0),setTimeout(()=>p("/login"),2e3)}catch(r){o(r.message||"Fehler beim Aktualisieren des Passworts")}finally{l(!1)}};return h?e.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded shadow text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Erfolg!"}),e.jsx("p",{children:"Ihr Passwort wurde erfolgreich aktualisiert."}),e.jsx("p",{children:"Sie werden zur Login-Seite weitergeleitet..."})]}):e.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded shadow",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Passwort zurücksetzen"}),d&&e.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:d}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium",children:"Neues Passwort"}),e.jsx("input",{className:"w-full border p-2 rounded",type:"password",placeholder:"Neues Passwort",value:a,onChange:s=>c(s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium",children:"Passwort bestätigen"}),e.jsx("input",{className:"w-full border p-2 rounded",type:"password",placeholder:"Passwort wiederholen",value:i,onChange:s=>m(s.target.value),required:!0})]}),e.jsx("button",{type:"submit",disabled:n,className:`w-full py-2 px-4 rounded text-white ${n?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:n?"Wird verarbeitet...":"Passwort aktualisieren"})]})]})}export{y as default};
